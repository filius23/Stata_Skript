<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Datenvisualisierung in Stata | GESIS Methodenseminar 2020</title>
  <meta name="description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Datenvisualisierung in Stata | GESIS Methodenseminar 2020" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Datenvisualisierung in Stata | GESIS Methodenseminar 2020" />
  
  <meta name="twitter:description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  

<meta name="author" content="Andreas Filser" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="desc1.html"/>
<link rel="next" href="zshg.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Gesis Methodenseminar</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Herzlich Willkommen!</a></li>
<li class="chapter" data-level="1" data-path="Stata1.html"><a href="Stata1.html"><i class="fa fa-check"></i><b>1</b> Einstieg in Stata</a><ul>
<li class="chapter" data-level="1.1" data-path="Stata1.html"><a href="Stata1.html#taschenrechner"><i class="fa fa-check"></i><b>1.1</b> Taschenrechner</a></li>
<li class="chapter" data-level="1.2" data-path="Stata1.html"><a href="Stata1.html#darstellung-in-diesem-skript"><i class="fa fa-check"></i><b>1.2</b> Darstellung in diesem Skript</a></li>
<li class="chapter" data-level="1.3" data-path="Stata1.html"><a href="Stata1.html#dofile-editor"><i class="fa fa-check"></i><b>1.3</b> DoFile Editor</a></li>
<li class="chapter" data-level="1.4" data-path="Stata1.html"><a href="Stata1.html#datensätze-laden"><i class="fa fa-check"></i><b>1.4</b> Datensätze laden</a></li>
<li class="chapter" data-level="1.5" data-path="Stata1.html"><a href="Stata1.html#daten-codebücher-fragebogen"><i class="fa fa-check"></i><b>1.5</b> Daten, Codebücher, Fragebogen</a></li>
<li class="chapter" data-level="1.6" data-path="Stata1.html"><a href="Stata1.html#überblicksbefehle"><i class="fa fa-check"></i><b>1.6</b> Überblicksbefehle</a><ul>
<li class="chapter" data-level="1.6.1" data-path="Stata1.html"><a href="Stata1.html#describe"><i class="fa fa-check"></i><b>1.6.1</b> <code>describe</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="Stata1.html"><a href="Stata1.html#browse"><i class="fa fa-check"></i><b>1.6.2</b> <code>browse</code></a></li>
<li class="chapter" data-level="1.6.3" data-path="Stata1.html"><a href="Stata1.html#list"><i class="fa fa-check"></i><b>1.6.3</b> <code>list</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="Stata1.html"><a href="Stata1.html#lookfor"><i class="fa fa-check"></i><b>1.6.4</b> <code>lookfor</code></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="Stata1.html"><a href="Stata1.html#löschen"><i class="fa fa-check"></i><b>1.7</b> löschen</a></li>
<li class="chapter" data-level="1.8" data-path="Stata1.html"><a href="Stata1.html#if-bedingung---nur-manche-zeilen-ansehen"><i class="fa fa-check"></i><b>1.8</b> if Bedingung - nur manche Zeilen ansehen</a></li>
<li class="chapter" data-level="1.9" data-path="Stata1.html"><a href="Stata1.html#U1"><i class="fa fa-check"></i><b>1.9</b> Übungen 1</a></li>
<li class="chapter" data-level="1.10" data-path="Stata1.html"><a href="Stata1.html#profi-übungen-1"><i class="fa fa-check"></i><b>1.10</b> Profi-Übungen 1</a></li>
<li class="chapter" data-level="1.11" data-path="Stata1.html"><a href="Stata1.html#anhang-1"><i class="fa fa-check"></i><b>1.11</b> Anhang 1</a><ul>
<li class="chapter" data-level="1.11.1" data-path="Stata1.html"><a href="Stata1.html#var_types"><i class="fa fa-check"></i><b>1.11.1</b> Variablentypen</a></li>
<li class="chapter" data-level="1.11.2" data-path="Stata1.html"><a href="Stata1.html#otherfmts"><i class="fa fa-check"></i><b>1.11.2</b> import anderer Dateiformate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Stata2.html"><a href="Stata2.html"><i class="fa fa-check"></i><b>2</b> Arbeiten mit Datensätzen in Stata</a><ul>
<li class="chapter" data-level="2.1" data-path="Stata2.html"><a href="Stata2.html#vorab-befehlsstruktur-hilfe"><i class="fa fa-check"></i><b>2.1</b> Vorab: Befehlsstruktur &amp; Hilfe</a></li>
<li class="chapter" data-level="2.2" data-path="Stata2.html"><a href="Stata2.html#auszählen-überblick-erhalten"><i class="fa fa-check"></i><b>2.2</b> Auszählen &amp; Überblick erhalten</a></li>
<li class="chapter" data-level="2.3" data-path="Stata2.html"><a href="Stata2.html#neue-variablen-erstellen"><i class="fa fa-check"></i><b>2.3</b> Neue Variablen erstellen</a></li>
<li class="chapter" data-level="2.4" data-path="Stata2.html"><a href="Stata2.html#bestehende-variablen-verändern"><i class="fa fa-check"></i><b>2.4</b> Bestehende Variablen verändern</a></li>
<li class="chapter" data-level="2.5" data-path="Stata2.html"><a href="Stata2.html#gen-ist-gut-kontrolle-ist-besser"><i class="fa fa-check"></i><b>2.5</b> gen ist gut, Kontrolle ist besser</a></li>
<li class="chapter" data-level="2.6" data-path="Stata2.html"><a href="Stata2.html#keep-drop"><i class="fa fa-check"></i><b>2.6</b> keep &amp; drop</a></li>
<li class="chapter" data-level="2.7" data-path="Stata2.html"><a href="Stata2.html#fehlende-werte"><i class="fa fa-check"></i><b>2.7</b> Fehlende Werte</a></li>
<li class="chapter" data-level="2.8" data-path="Stata2.html"><a href="Stata2.html#miss_if"><i class="fa fa-check"></i><b>2.8</b> if Bedingungen und fehlende Werte</a></li>
<li class="chapter" data-level="2.9" data-path="Stata2.html"><a href="Stata2.html#labels-und-if-bedingungen"><i class="fa fa-check"></i><b>2.9</b> Labels und if-Bedingungen</a></li>
<li class="chapter" data-level="2.10" data-path="Stata2.html"><a href="Stata2.html#nochmal-von-vorne-daten-neu-laden"><i class="fa fa-check"></i><b>2.10</b> Nochmal von vorne: Daten neu laden</a></li>
<li class="chapter" data-level="2.11" data-path="Stata2.html"><a href="Stata2.html#speichern"><i class="fa fa-check"></i><b>2.11</b> Speichern</a></li>
<li class="chapter" data-level="2.12" data-path="Stata2.html"><a href="Stata2.html#übungen-2"><i class="fa fa-check"></i><b>2.12</b> Übungen 2</a></li>
<li class="chapter" data-level="2.13" data-path="Stata2.html"><a href="Stata2.html#profi-übungen-2"><i class="fa fa-check"></i><b>2.13</b> Profi-Übungen 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="desc1.html"><a href="desc1.html"><i class="fa fa-check"></i><b>3</b> Deskriptive Statistik</a><ul>
<li class="chapter" data-level="3.1" data-path="desc1.html"><a href="desc1.html#kategoriale-merkmale-mit-tabulate-beschreiben"><i class="fa fa-check"></i><b>3.1</b> Kategoriale Merkmale mit <code>tabulate</code> beschreiben</a><ul>
<li class="chapter" data-level="3.1.1" data-path="desc1.html"><a href="desc1.html#zwei-variablen-eine-tabelle-kontingenztabellen"><i class="fa fa-check"></i><b>3.1.1</b> Zwei Variablen, eine Tabelle: Kontingenztabellen</a></li>
<li class="chapter" data-level="3.1.2" data-path="desc1.html"><a href="desc1.html#in-prozent-relative-häufigkeiten"><i class="fa fa-check"></i><b>3.1.2</b> In Prozent: Relative Häufigkeiten</a></li>
<li class="chapter" data-level="3.1.3" data-path="desc1.html"><a href="desc1.html#pro-gruppe-1-zeilenprozente"><i class="fa fa-check"></i><b>3.1.3</b> pro Gruppe 1: Zeilenprozente</a></li>
<li class="chapter" data-level="3.1.4" data-path="desc1.html"><a href="desc1.html#pro-gruppe-2-spaltenprozente"><i class="fa fa-check"></i><b>3.1.4</b> pro Gruppe 2: Spaltenprozente</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="desc1.html"><a href="desc1.html#metrische-variablen-beschreiben"><i class="fa fa-check"></i><b>3.2</b> Metrische Variablen beschreiben</a><ul>
<li class="chapter" data-level="3.2.1" data-path="desc1.html"><a href="desc1.html#summarize"><i class="fa fa-check"></i><b>3.2.1</b> <code>summarize</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="desc1.html"><a href="desc1.html#tabstat"><i class="fa fa-check"></i><b>3.2.2</b> <code>tabstat</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="desc1.html"><a href="desc1.html#by_vgl"><i class="fa fa-check"></i><b>3.2.3</b> Kennzahlen vergleichen mit <code>tabstat</code></a></li>
<li class="chapter" data-level="3.2.4" data-path="desc1.html"><a href="desc1.html#streu"><i class="fa fa-check"></i><b>3.2.4</b> Streuungsmaße: Varianz, Standardabweichung, Variationskoeffizient</a></li>
<li class="chapter" data-level="3.2.5" data-path="desc1.html"><a href="desc1.html#gini-koeffizient"><i class="fa fa-check"></i><b>3.2.5</b> Gini-Koeffizient</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="desc1.html"><a href="desc1.html#übungen-3"><i class="fa fa-check"></i><b>3.3</b> Übungen 3</a><ul>
<li class="chapter" data-level="3.3.1" data-path="desc1.html"><a href="desc1.html#tab"><i class="fa fa-check"></i><b>3.3.1</b> Übung 3-1</a></li>
<li class="chapter" data-level="3.3.2" data-path="desc1.html"><a href="desc1.html#met"><i class="fa fa-check"></i><b>3.3.2</b> Übung 3-2</a></li>
<li class="chapter" data-level="3.3.3" data-path="desc1.html"><a href="desc1.html#weitere-übungen-3"><i class="fa fa-check"></i><b>3.3.3</b> Weitere Übungen 3</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="desc1.html"><a href="desc1.html#profi-übungen-3"><i class="fa fa-check"></i><b>3.4</b> Profi-Übungen 3</a></li>
<li class="chapter" data-level="3.5" data-path="desc1.html"><a href="desc1.html#anhang-kap-3"><i class="fa fa-check"></i><b>3.5</b> Anhang Kap 3</a><ul>
<li class="chapter" data-level="3.5.1" data-path="desc1.html"><a href="desc1.html#vlabel"><i class="fa fa-check"></i><b>3.5.1</b> labels vergeben</a></li>
<li class="chapter" data-level="3.5.2" data-path="desc1.html"><a href="desc1.html#variance"><i class="fa fa-check"></i><b>3.5.2</b> Varianz erklärt</a></li>
<li class="chapter" data-level="3.5.3" data-path="desc1.html"><a href="desc1.html#sk_kur"><i class="fa fa-check"></i><b>3.5.3</b> Schiefe &amp; Wölbung</a></li>
<li class="chapter" data-level="3.5.4" data-path="desc1.html"><a href="desc1.html#bys_su"><i class="fa fa-check"></i><b>3.5.4</b> Kombination von <code>summarize</code> mit dem <code>by</code>-Präfix</a></li>
<li class="chapter" data-level="3.5.5" data-path="desc1.html"><a href="desc1.html#if_vgl"><i class="fa fa-check"></i><b>3.5.5</b> Kennzahlvergleiche mit <code>if</code></a></li>
<li class="chapter" data-level="3.5.6" data-path="desc1.html"><a href="desc1.html#kennzahlvergleich-mit-tabulate-und-der-option-summarize"><i class="fa fa-check"></i><b>3.5.6</b> Kennzahlvergleich mit <code>tabulate</code> und der Option <code>summarize()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>4</b> Datenvisualisierung in Stata</a><ul>
<li class="chapter" data-level="4.1" data-path="dataviz.html"><a href="dataviz.html#visualisierung-einer-variable"><i class="fa fa-check"></i><b>4.1</b> Visualisierung einer Variable</a><ul>
<li class="chapter" data-level="4.1.1" data-path="dataviz.html"><a href="dataviz.html#metrische-variablen"><i class="fa fa-check"></i><b>4.1.1</b> metrische Variablen</a></li>
<li class="chapter" data-level="4.1.2" data-path="dataviz.html"><a href="dataviz.html#bar_col"><i class="fa fa-check"></i><b>4.1.2</b> Kategoriale Variablen</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dataviz.html"><a href="dataviz.html#verteilungen-vergleichen-mit-facetten"><i class="fa fa-check"></i><b>4.2</b> Verteilungen vergleichen mit Facetten</a></li>
<li class="chapter" data-level="4.3" data-path="dataviz.html"><a href="dataviz.html#bivar_plot"><i class="fa fa-check"></i><b>4.3</b> Gemeinsame Verteilung zweier Variablen</a><ul>
<li class="chapter" data-level="4.3.1" data-path="dataviz.html"><a href="dataviz.html#mosaikplot"><i class="fa fa-check"></i><b>4.3.1</b> Mosaikplot</a></li>
<li class="chapter" data-level="4.3.2" data-path="dataviz.html"><a href="dataviz.html#streudiagramm"><i class="fa fa-check"></i><b>4.3.2</b> Streudiagramm</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dataviz.html"><a href="dataviz.html#weitere-twoway-grafiken"><i class="fa fa-check"></i><b>4.4</b> Weitere <code>twoway</code> Grafiken</a></li>
<li class="chapter" data-level="4.5" data-path="dataviz.html"><a href="dataviz.html#twoway_comb"><i class="fa fa-check"></i><b>4.5</b> Kombinieren von zwei twoway-Grafiken</a></li>
<li class="chapter" data-level="4.6" data-path="dataviz.html"><a href="dataviz.html#gruppierte-boxplots"><i class="fa fa-check"></i><b>4.6</b> Gruppierte Boxplots</a></li>
<li class="chapter" data-level="4.7" data-path="dataviz.html"><a href="dataviz.html#übungen-4"><i class="fa fa-check"></i><b>4.7</b> Übungen 4</a><ul>
<li class="chapter" data-level="4.7.1" data-path="dataviz.html"><a href="dataviz.html#plt1"><i class="fa fa-check"></i><b>4.7.1</b> Übung 4-1</a></li>
<li class="chapter" data-level="4.7.2" data-path="dataviz.html"><a href="dataviz.html#plt2"><i class="fa fa-check"></i><b>4.7.2</b> Übung 4-2</a></li>
<li class="chapter" data-level="4.7.3" data-path="dataviz.html"><a href="dataviz.html#weitere-übungen-kap4"><i class="fa fa-check"></i><b>4.7.3</b> Weitere Übungen Kap4</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="dataviz.html"><a href="dataviz.html#optionen"><i class="fa fa-check"></i><b>4.8</b> Optionen</a><ul>
<li class="chapter" data-level="4.8.1" data-path="dataviz.html"><a href="dataviz.html#title"><i class="fa fa-check"></i><b>4.8.1</b> Titel</a></li>
<li class="chapter" data-level="4.8.2" data-path="dataviz.html"><a href="dataviz.html#achsenbeschriftung"><i class="fa fa-check"></i><b>4.8.2</b> Achsenbeschriftung</a></li>
<li class="chapter" data-level="4.8.3" data-path="dataviz.html"><a href="dataviz.html#text-einfügen"><i class="fa fa-check"></i><b>4.8.3</b> Text einfügen</a></li>
<li class="chapter" data-level="4.8.4" data-path="dataviz.html"><a href="dataviz.html#font"><i class="fa fa-check"></i><b>4.8.4</b> Schriftart &amp; Textgröße</a></li>
<li class="chapter" data-level="4.8.5" data-path="dataviz.html"><a href="dataviz.html#legend"><i class="fa fa-check"></i><b>4.8.5</b> Legende</a></li>
<li class="chapter" data-level="4.8.6" data-path="dataviz.html"><a href="dataviz.html#mark"><i class="fa fa-check"></i><b>4.8.6</b> Marker</a></li>
<li class="chapter" data-level="4.8.7" data-path="dataviz.html"><a href="dataviz.html#color"><i class="fa fa-check"></i><b>4.8.7</b> Farben</a></li>
<li class="chapter" data-level="4.8.8" data-path="dataviz.html"><a href="dataviz.html#vorlagen"><i class="fa fa-check"></i><b>4.8.8</b> Vorlagen</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="dataviz.html"><a href="dataviz.html#anhang-beispiele-zum-selbst-anpassen"><i class="fa fa-check"></i><b>4.9</b> Anhang &amp; Beispiele zum selbst anpassen</a><ul>
<li class="chapter" data-level="4.9.1" data-path="dataviz.html"><a href="dataviz.html#boxplot"><i class="fa fa-check"></i><b>4.9.1</b> Boxplot</a></li>
<li class="chapter" data-level="4.9.2" data-path="dataviz.html"><a href="dataviz.html#scatterplot"><i class="fa fa-check"></i><b>4.9.2</b> Scatterplot</a></li>
<li class="chapter" data-level="4.9.3" data-path="dataviz.html"><a href="dataviz.html#pyramid"><i class="fa fa-check"></i><b>4.9.3</b> Bevölkerungspyramide</a></li>
<li class="chapter" data-level="4.9.4" data-path="dataviz.html"><a href="dataviz.html#boxplot1"><i class="fa fa-check"></i><b>4.9.4</b> Boxplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="zshg.html"><a href="zshg.html"><i class="fa fa-check"></i><b>5</b> Zusammenhangsmaße</a><ul>
<li class="chapter" data-level="5.1" data-path="zshg.html"><a href="zshg.html#zshg_met"><i class="fa fa-check"></i><b>5.1</b> Metrisch skalierte Variablen</a><ul>
<li class="chapter" data-level="5.1.1" data-path="zshg.html"><a href="zshg.html#cor"><i class="fa fa-check"></i><b>5.1.1</b> Korrelationskoeffizient</a></li>
<li class="chapter" data-level="5.1.2" data-path="zshg.html"><a href="zshg.html#regression"><i class="fa fa-check"></i><b>5.1.2</b> Regression</a></li>
<li class="chapter" data-level="5.1.3" data-path="zshg.html"><a href="zshg.html#vorhergesagte-werte"><i class="fa fa-check"></i><b>5.1.3</b> vorhergesagte Werte</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="zshg.html"><a href="zshg.html#zshg_ord"><i class="fa fa-check"></i><b>5.2</b> Ordinal skalierte Merkmale</a><ul>
<li class="chapter" data-level="5.2.1" data-path="zshg.html"><a href="zshg.html#spear"><i class="fa fa-check"></i><b>5.2.1</b> Spearman- Rangkorrelation</a></li>
<li class="chapter" data-level="5.2.2" data-path="zshg.html"><a href="zshg.html#tau"><i class="fa fa-check"></i><b>5.2.2</b> Konkordanzmaße</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="zshg.html"><a href="zshg.html#zshg_nom"><i class="fa fa-check"></i><b>5.3</b> Nominal skalierte Variablen</a><ul>
<li class="chapter" data-level="5.3.1" data-path="zshg.html"><a href="zshg.html#OR"><i class="fa fa-check"></i><b>5.3.1</b> Odds Ratio</a></li>
<li class="chapter" data-level="5.3.2" data-path="zshg.html"><a href="zshg.html#chi2"><i class="fa fa-check"></i><b>5.3.2</b> Chi²-basierte Maße</a></li>
<li class="chapter" data-level="5.3.3" data-path="zshg.html"><a href="zshg.html#cramers-upsilon"><i class="fa fa-check"></i><b>5.3.3</b> Cramer’s <span class="math inline">\(\upsilon\)</span></a></li>
<li class="chapter" data-level="5.3.4" data-path="zshg.html"><a href="zshg.html#phi"><i class="fa fa-check"></i><b>5.3.4</b> <span class="math inline">\(\phi\)</span></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="zshg.html"><a href="zshg.html#welches-maß-richtig"><i class="fa fa-check"></i><b>5.4</b> Welches Maß richtig?</a></li>
<li class="chapter" data-level="5.5" data-path="zshg.html"><a href="zshg.html#übungen-5"><i class="fa fa-check"></i><b>5.5</b> Übungen 5</a><ul>
<li class="chapter" data-level="5.5.1" data-path="zshg.html"><a href="zshg.html#auf_met"><i class="fa fa-check"></i><b>5.5.1</b> Übung 5-1</a></li>
<li class="chapter" data-level="5.5.2" data-path="zshg.html"><a href="zshg.html#auf_ord"><i class="fa fa-check"></i><b>5.5.2</b> Übung 5-2</a></li>
<li class="chapter" data-level="5.5.3" data-path="zshg.html"><a href="zshg.html#auf_nom"><i class="fa fa-check"></i><b>5.5.3</b> Übung 5-3</a></li>
<li class="chapter" data-level="5.5.4" data-path="zshg.html"><a href="zshg.html#weitere-übungen-5"><i class="fa fa-check"></i><b>5.5.4</b> Weitere Übungen 5</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="zshg.html"><a href="zshg.html#profi-übungen-5"><i class="fa fa-check"></i><b>5.6</b> Profi-Übungen 5</a></li>
<li class="chapter" data-level="5.7" data-path="zshg.html"><a href="zshg.html#anhang"><i class="fa fa-check"></i><b>5.7</b> Anhang</a><ul>
<li class="chapter" data-level="5.7.1" data-path="zshg.html"><a href="zshg.html#reg"><i class="fa fa-check"></i><b>5.7.1</b> Idee einer Regression</a></li>
<li class="chapter" data-level="5.7.2" data-path="zshg.html"><a href="zshg.html#resid"><i class="fa fa-check"></i><b>5.7.2</b> Residuen</a></li>
<li class="chapter" data-level="5.7.3" data-path="zshg.html"><a href="zshg.html#quad_res"><i class="fa fa-check"></i><b>5.7.3</b> Quadrierte Residuen</a></li>
<li class="chapter" data-level="5.7.4" data-path="zshg.html"><a href="zshg.html#interpretation-der-regression"><i class="fa fa-check"></i><b>5.7.4</b> Interpretation der Regression</a></li>
<li class="chapter" data-level="5.7.5" data-path="zshg.html"><a href="zshg.html#reg_pred"><i class="fa fa-check"></i><b>5.7.5</b> Vorhergesagte Werte</a></li>
<li class="chapter" data-level="5.7.6" data-path="zshg.html"><a href="zshg.html#resid2"><i class="fa fa-check"></i><b>5.7.6</b> Residuen Teil 2</a></li>
<li class="chapter" data-level="5.7.7" data-path="zshg.html"><a href="zshg.html#r2"><i class="fa fa-check"></i><b>5.7.7</b> Modellgüte</a></li>
<li class="chapter" data-level="5.7.8" data-path="zshg.html"><a href="zshg.html#indiff"><i class="fa fa-check"></i><b>5.7.8</b> Indifferenztabelle</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="zshg2.html"><a href="zshg2.html"><i class="fa fa-check"></i><b>6</b> Zusammenhänge 2</a><ul>
<li class="chapter" data-level="6.1" data-path="zshg2.html"><a href="zshg2.html#zusammenhänge-vergleichen"><i class="fa fa-check"></i><b>6.1</b> Zusammenhänge vergleichen</a></li>
<li class="chapter" data-level="6.2" data-path="zshg2.html"><a href="zshg2.html#zusammenhänge-visualisieren"><i class="fa fa-check"></i><b>6.2</b> Zusammenhänge visualisieren</a></li>
<li class="chapter" data-level="6.3" data-path="zshg2.html"><a href="zshg2.html#kategoriale-zusammenhänge"><i class="fa fa-check"></i><b>6.3</b> Kategoriale Zusammenhänge</a><ul>
<li class="chapter" data-level="6.3.1" data-path="zshg2.html"><a href="zshg2.html#ordinale-zusammenhangsmaße-vergleichen"><i class="fa fa-check"></i><b>6.3.1</b> Ordinale Zusammenhangsmaße vergleichen</a></li>
<li class="chapter" data-level="6.3.2" data-path="zshg2.html"><a href="zshg2.html#vergleich-visualisieren"><i class="fa fa-check"></i><b>6.3.2</b> Vergleich visualisieren</a></li>
<li class="chapter" data-level="6.3.3" data-path="zshg2.html"><a href="zshg2.html#nominale-zusammenhangsmaße-vergleichen"><i class="fa fa-check"></i><b>6.3.3</b> Nominale Zusammenhangsmaße vergleichen</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="zshg2.html"><a href="zshg2.html#übungen-6"><i class="fa fa-check"></i><b>6.4</b> Übungen 6</a><ul>
<li class="chapter" data-level="6.4.1" data-path="zshg2.html"><a href="zshg2.html#met_vgl"><i class="fa fa-check"></i><b>6.4.1</b> Übung 6-1</a></li>
<li class="chapter" data-level="6.4.2" data-path="zshg2.html"><a href="zshg2.html#ord_vgl"><i class="fa fa-check"></i><b>6.4.2</b> Übung 6-2</a></li>
<li class="chapter" data-level="6.4.3" data-path="zshg2.html"><a href="zshg2.html#nom_vgl"><i class="fa fa-check"></i><b>6.4.3</b> Übung 6-3</a></li>
<li class="chapter" data-level="6.4.4" data-path="zshg2.html"><a href="zshg2.html#weitere-übungen-kap-6"><i class="fa fa-check"></i><b>6.4.4</b> Weitere Übungen Kap 6</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="zshg.html"><a href="zshg.html#anhang"><i class="fa fa-check"></i><b>6.5</b> Anhang</a><ul>
<li class="chapter" data-level="6.5.1" data-path="zshg2.html"><a href="zshg2.html#lpattern"><i class="fa fa-check"></i><b>6.5.1</b> Optionen für <code>lpattern</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="zshg2.html"><a href="zshg2.html#scatterplot-für-kategoriale-merkmale"><i class="fa fa-check"></i><b>6.5.2</b> Scatterplot für kategoriale Merkmale</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="inf1.html"><a href="inf1.html"><i class="fa fa-check"></i><b>7</b> Inferenzstatistik I</a><ul>
<li class="chapter" data-level="7.1" data-path="inf1.html"><a href="inf1.html#inferenz"><i class="fa fa-check"></i><b>7.1</b> Inferenz</a></li>
<li class="chapter" data-level="7.2" data-path="inf1.html"><a href="inf1.html#parametrische-ki-schätzung"><i class="fa fa-check"></i><b>7.2</b> Parametrische KI-Schätzung</a><ul>
<li class="chapter" data-level="7.2.1" data-path="inf1.html"><a href="inf1.html#t-z-wert"><i class="fa fa-check"></i><b>7.2.1</b> t-/z-Wert</a></li>
<li class="chapter" data-level="7.2.2" data-path="inf1.html"><a href="inf1.html#standardfehler"><i class="fa fa-check"></i><b>7.2.2</b> Standardfehler</a></li>
<li class="chapter" data-level="7.2.3" data-path="inf1.html"><a href="inf1.html#kis-berechnen"><i class="fa fa-check"></i><b>7.2.3</b> KIs berechnen</a></li>
<li class="chapter" data-level="7.2.4" data-path="inf1.html"><a href="inf1.html#mean"><i class="fa fa-check"></i><b>7.2.4</b> <code>mean</code></a></li>
<li class="chapter" data-level="7.2.5" data-path="inf1.html"><a href="inf1.html#vergleich"><i class="fa fa-check"></i><b>7.2.5</b> Vergleich</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="inf1.html"><a href="inf1.html#bootstrapping"><i class="fa fa-check"></i><b>7.3</b> Bootstrapping</a></li>
<li class="chapter" data-level="7.4" data-path="inf1.html"><a href="inf1.html#übungen-7"><i class="fa fa-check"></i><b>7.4</b> Übungen 7</a></li>
<li class="chapter" data-level="7.5" data-path="inf1.html"><a href="inf1.html#anhang-kap7"><i class="fa fa-check"></i><b>7.5</b> Anhang Kap7</a><ul>
<li class="chapter" data-level="7.5.1" data-path="inf1.html"><a href="inf1.html#normalverteilung"><i class="fa fa-check"></i><b>7.5.1</b> Normalverteilung</a></li>
<li class="chapter" data-level="7.5.2" data-path="inf1.html"><a href="inf1.html#student-t-verteilung"><i class="fa fa-check"></i><b>7.5.2</b> Student t-Verteilung</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="inf2.html"><a href="inf2.html"><i class="fa fa-check"></i><b>8</b> t-Tests</a><ul>
<li class="chapter" data-level="8.1" data-path="inf2.html"><a href="inf2.html#t-test-per-hand-und-in-stata"><i class="fa fa-check"></i><b>8.1</b> t-Test per Hand und in Stata</a><ul>
<li class="chapter" data-level="8.1.1" data-path="inf2.html"><a href="inf2.html#ttest1"><i class="fa fa-check"></i><b>8.1.1</b> beiseitiger t-Test</a></li>
<li class="chapter" data-level="8.1.2" data-path="inf2.html"><a href="inf2.html#linksseitiger-t-test"><i class="fa fa-check"></i><b>8.1.2</b> linksseitiger t-Test</a></li>
<li class="chapter" data-level="8.1.3" data-path="inf2.html"><a href="inf2.html#rechtsseitiger-t-test"><i class="fa fa-check"></i><b>8.1.3</b> rechtsseitiger t-Test</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="inf2.html"><a href="inf2.html#mittelwertttest"><i class="fa fa-check"></i><b>8.2</b> Mittelwertvergleiche mit dem t-Test</a><ul>
<li class="chapter" data-level="8.2.1" data-path="inf2.html"><a href="inf2.html#unverbundener-t-test"><i class="fa fa-check"></i><b>8.2.1</b> Unverbundener t-Test</a></li>
<li class="chapter" data-level="8.2.2" data-path="inf2.html"><a href="inf2.html#verbundener-t-test"><i class="fa fa-check"></i><b>8.2.2</b> Verbundener t-Test</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="inf2.html"><a href="inf2.html#übersicht-zu-varianten-für-ttest"><i class="fa fa-check"></i><b>8.3</b> Übersicht zu Varianten für <code>ttest</code></a></li>
<li class="chapter" data-level="8.4" data-path="inf2.html"><a href="inf2.html#tvsmu"><i class="fa fa-check"></i><b>8.4</b> Übungen 8-1</a></li>
<li class="chapter" data-level="8.5" data-path="inf2.html"><a href="inf2.html#tgroup"><i class="fa fa-check"></i><b>8.5</b> Übungen 8-2</a></li>
<li class="chapter" data-level="8.6" data-path="inf2.html"><a href="inf2.html#tpaired"><i class="fa fa-check"></i><b>8.6</b> Übung 8-3</a></li>
<li class="chapter" data-level="8.7" data-path="inf2.html"><a href="inf2.html#weitere-übungen-kap-8"><i class="fa fa-check"></i><b>8.7</b> weitere Übungen Kap 8</a></li>
<li class="chapter" data-level="8.8" data-path="inf2.html"><a href="inf2.html#hinweise"><i class="fa fa-check"></i><b>8.8</b> Hinweise</a><ul>
<li class="chapter" data-level="8.8.1" data-path="inf2.html"><a href="inf2.html#vollz"><i class="fa fa-check"></i><b>8.8.1</b> Auswahl der in Vollzeit beschäftigten Befragten</a></li>
<li class="chapter" data-level="8.8.2" data-path="inf2.html"><a href="inf2.html#genhelp"><i class="fa fa-check"></i><b>8.8.2</b> Kohortenvergleich Tipps</a></li>
<li class="chapter" data-level="8.8.3" data-path="inf2.html"><a href="inf2.html#bmihelp"><i class="fa fa-check"></i><b>8.8.3</b> BMI Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="inf2.html"><a href="inf2.html#gruppenunterschiede-visualisieren"><i class="fa fa-check"></i><b>8.9</b> Gruppenunterschiede visualisieren</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="hypo.html"><a href="hypo.html"><i class="fa fa-check"></i><b>9</b> Weitere Hypothesentests</a><ul>
<li class="chapter" data-level="9.1" data-path="hypo.html"><a href="hypo.html#ftest"><i class="fa fa-check"></i><b>9.1</b> Vergleich von Varianzen mit dem F-Test</a></li>
<li class="chapter" data-level="9.2" data-path="hypo.html"><a href="hypo.html#proportionen-und-häufigkeiten"><i class="fa fa-check"></i><b>9.2</b> Proportionen und Häufigkeiten</a><ul>
<li class="chapter" data-level="9.2.1" data-path="hypo.html"><a href="hypo.html#binomialtest"><i class="fa fa-check"></i><b>9.2.1</b> Binomialtest</a></li>
<li class="chapter" data-level="9.2.2" data-path="hypo.html"><a href="hypo.html#chi²-test"><i class="fa fa-check"></i><b>9.2.2</b> Chi²-Test</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="hypo.html"><a href="hypo.html#überblick"><i class="fa fa-check"></i><b>9.3</b> Überblick</a></li>
<li class="chapter" data-level="9.4" data-path="hypo.html"><a href="hypo.html#übungen-9"><i class="fa fa-check"></i><b>9.4</b> Übungen 9</a><ul>
<li class="chapter" data-level="9.4.1" data-path="hypo.html"><a href="hypo.html#fueb"><i class="fa fa-check"></i><b>9.4.1</b> Übung 9-1</a></li>
<li class="chapter" data-level="9.4.2" data-path="hypo.html"><a href="hypo.html#übung-9-2"><i class="fa fa-check"></i><b>9.4.2</b> Übung 9-2</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="hypo.html"><a href="hypo.html#anova"><i class="fa fa-check"></i><b>9.5</b> ANOVA</a><ul>
<li class="chapter" data-level="9.5.1" data-path="hypo.html"><a href="hypo.html#anova-vs.-t-tests"><i class="fa fa-check"></i><b>9.5.1</b> ANOVA vs. t-Tests</a></li>
<li class="chapter" data-level="9.5.2" data-path="hypo.html"><a href="hypo.html#anova-vs.-lineare-regression"><i class="fa fa-check"></i><b>9.5.2</b> ANOVA vs. lineare Regression</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="hypo.html"><a href="hypo.html#anova-mehrere-gruppen"><i class="fa fa-check"></i><b>9.6</b> ANOVA mehrere Gruppen</a></li>
<li class="chapter" data-level="9.7" data-path="inf2.html"><a href="inf2.html#hinweise"><i class="fa fa-check"></i><b>9.7</b> Hinweise</a><ul>
<li class="chapter" data-level="9.7.1" data-path="hypo.html"><a href="hypo.html#readin091"><i class="fa fa-check"></i><b>9.7.1</b> Einlesen und auswählen für Ü9-1</a></li>
<li class="chapter" data-level="9.7.2" data-path="hypo.html"><a href="hypo.html#binom_help"><i class="fa fa-check"></i><b>9.7.2</b> Einlesen und auswählen für Ü9-2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="export1.html"><a href="export1.html"><i class="fa fa-check"></i><b>10</b> Ergebnisexport &amp; weitere Tipps</a><ul>
<li class="chapter" data-level="10.1" data-path="export1.html"><a href="export1.html#graph-export"><i class="fa fa-check"></i><b>10.1</b> graph export</a></li>
<li class="chapter" data-level="10.2" data-path="export1.html"><a href="export1.html#esttab"><i class="fa fa-check"></i><b>10.2</b> esttab</a></li>
<li class="chapter" data-level="10.3" data-path="export1.html"><a href="export1.html#log-file"><i class="fa fa-check"></i><b>10.3</b> log file</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="adva.html"><a href="adva.html"><i class="fa fa-check"></i><b>11</b> Fortgeschrittene Themen</a><ul>
<li class="chapter" data-level="11.1" data-path="adva.html"><a href="adva.html#wertelabels"><i class="fa fa-check"></i><b>11.1</b> Wertelabels</a></li>
<li class="chapter" data-level="11.2" data-path="adva.html"><a href="adva.html#sortieren"><i class="fa fa-check"></i><b>11.2</b> sortieren</a></li>
<li class="chapter" data-level="11.3" data-path="adva.html"><a href="adva.html#informationen-aus-mehreren-variablen"><i class="fa fa-check"></i><b>11.3</b> Informationen aus mehreren Variablen</a></li>
<li class="chapter" data-level="11.4" data-path="adva.html"><a href="adva.html#egen"><i class="fa fa-check"></i><b>11.4</b> egen</a></li>
<li class="chapter" data-level="11.5" data-path="adva.html"><a href="adva.html#gruppierte-berechnungen"><i class="fa fa-check"></i><b>11.5</b> gruppierte Berechnungen</a></li>
<li class="chapter" data-level="11.6" data-path="adva.html"><a href="adva.html#sep1"><i class="fa fa-check"></i><b>11.6</b> Subgruppen-Variablen erstellen mit <code>separate</code></a></li>
<li class="chapter" data-level="11.7" data-path="adva.html"><a href="adva.html#collapse"><i class="fa fa-check"></i><b>11.7</b> collapse</a></li>
<li class="chapter" data-level="11.8" data-path="adva.html"><a href="adva.html#indikatoren-umdrehen"><i class="fa fa-check"></i><b>11.8</b> Indikatoren umdrehen</a></li>
<li class="chapter" data-level="11.9" data-path="adva.html"><a href="adva.html#informationen-aus-mehreren-datensätzen"><i class="fa fa-check"></i><b>11.9</b> Informationen aus mehreren Datensätzen</a></li>
<li class="chapter" data-level="11.10" data-path="adva.html"><a href="adva.html#arbeiten-mit-textvariablen"><i class="fa fa-check"></i><b>11.10</b> Arbeiten mit Textvariablen</a></li>
<li class="chapter" data-level="11.11" data-path="adva.html"><a href="adva.html#link-liste"><i class="fa fa-check"></i><b>11.11</b> Link Liste</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GESIS Methodenseminar 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataviz" class="section level1">
<h1><span class="header-section-number">4</span> Datenvisualisierung in Stata</h1>
<p>Wir starten wie immer mit dem Einlesen eines Datensatzes:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb1-1"><a href="dataviz.html#cb1-1"></a>cd <span class="st">&quot;...&quot;</span></span>
<span id="cb1-2"><a href="dataviz.html#cb1-2"></a><span class="kw">use</span> <span class="st">&quot;Allbus_2018.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb1-3"><a href="dataviz.html#cb1-3"></a><span class="kw">replace</span> inc = . <span class="kw">if</span> inc &lt; 0</span>
<span id="cb1-4"><a href="dataviz.html#cb1-4"></a><span class="kw">replace</span> educ = . <span class="kw">if</span> educ &lt; 0</span>
<span id="cb1-5"><a href="dataviz.html#cb1-5"></a><span class="kw">replace</span> age = . <span class="kw">if</span> age &lt; 0</span></code></pre></div>
<p>Für Grafiken gilt noch mehr als für alle anderen Aspekte in Stata: ausprobieren und sehen, was passiert! Nachdem in der Regel ja zumindest eine ungefähre Vorstellung existiert, wie die zu erstellende Grafik aussehen soll, sind Grafik-Gallerien ein guter Startpunkt das eigene Trial &amp; Error. Die größte Herausforderung ist häufig, eine Vorstellung zu entwickeln, wie die Darstellung aussehen soll. Daher im Folgenden einige Beispiele für verschiedene Anwendungsfälle. Diese lassen sich ganz grob entlang zweier Fragen einteilen:</p>
<ul>
<li>Soll eine oder mehrere Variablen dargestellt werden?</li>
<li>Was ist das Skalenniveau der darzustellenden Variable(n)?</li>
</ul>
<p>Grundsätzlich bestehen Grafik-Befehle aus zwei Teilen: dem Befehl <code>graph</code> und der Angabe eines Grafik-Typs.</p>
<div id="visualisierung-einer-variable" class="section level2">
<h2><span class="header-section-number">4.1</span> Visualisierung einer Variable</h2>
<div id="metrische-variablen" class="section level3">
<h3><span class="header-section-number">4.1.1</span> metrische Variablen</h3>
<p>Die Verteilung metrischer Variablen (wie z.B. die Einkommensangaben in <code>inc</code>) können als Boxplot, Histogramm oder kdensity dargestellt werden. Während Histogramme und K-Density-Plots die Häufigkeit von Ausprägungen innerhalb von Wertebereichen zeigen, fassen Boxplots die Lagemaße zu einer Darstellung zusammen - mehr dazu hier <a href="dataviz.html#boxplot1">hier</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb2-1"><a href="dataviz.html#cb2-1"></a><span class="kw">graph</span> box inc</span>
<span id="cb2-2"><a href="dataviz.html#cb2-2"></a><span class="kw">histogram</span> inc</span>
<span id="cb2-3"><a href="dataviz.html#cb2-3"></a><span class="kw">kdensity</span> inc</span></code></pre></div>
<p><img src="04_dist_plots.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="bar_col" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Kategoriale Variablen</h3>
<p>Die Darstellung einer kategorialen Variable ist häufig eine grafische Übersetzung einer Häufigkeitsauszählung. Insbesondere bieten sich dafür Säulen- und Balkendiagramme an. Beispielsweise könnten wir die Schulabschlüsse der Befragen auszählen. Dazu zählen<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> wir die <code>respid</code>s pro Ausprägung von <code>educ</code><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, mit <code>graph bar</code> bzw <code>graph bar, horizontal</code> bekommen wir dann ein Säulen- bw. Balkendiagramm.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb3-1"><a href="dataviz.html#cb3-1"></a><span class="kw">graph</span> <span class="bn">bar</span> (<span class="fu">count</span>) respid, <span class="bn">over</span>(educ)  </span>
<span id="cb3-2"><a href="dataviz.html#cb3-2"></a><span class="kw">graph</span> <span class="bn">bar</span> (<span class="fu">count</span>) respid, <span class="bn">over</span>(educ) horizontal</span></code></pre></div>
<p><img src="04_bar_plots.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="verteilungen-vergleichen-mit-facetten" class="section level2">
<h2><span class="header-section-number">4.2</span> Verteilungen vergleichen mit Facetten</h2>
<p>In der Regel wollen wir aber Verteilungen vergleichen, wie wir das auch schon in Kapitel 3 mit Hilfe von Tabellen und Kennzahlen getan haben. Hier hilft die Option <code>by</code> weiter. Wir hängen an die Befehle von oben einfach <code>,by (sex)</code> an, um getrennte Darstellungen für Männer und Frauen zu bekommen:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb4-1"><a href="dataviz.html#cb4-1"></a><span class="kw">graph</span> box inc, <span class="kw">by</span>(sex)</span>
<span id="cb4-2"><a href="dataviz.html#cb4-2"></a><span class="kw">histogram</span> inc, <span class="kw">by</span>(sex)</span>
<span id="cb4-3"><a href="dataviz.html#cb4-3"></a><span class="kw">twoway</span> (<span class="kw">kdensity</span> inc), <span class="kw">by</span>(sex) <span class="co">// zur Bedeutung von twoway gleich mehr</span></span></code></pre></div>
<p><img src="04_dist_plots2.png" width="100%" height="100%" style="display: block; margin: auto;" />
Das funktioniert auch für die Säulen- und Balkendiagramme:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb5-1"><a href="dataviz.html#cb5-1"></a><span class="kw">graph</span> <span class="bn">bar</span> (<span class="fu">count</span>) respid, <span class="bn">over</span>(educ)  <span class="kw">by</span>(sex)</span>
<span id="cb5-2"><a href="dataviz.html#cb5-2"></a><span class="kw">graph</span> <span class="bn">bar</span> (<span class="fu">count</span>) respid, <span class="bn">over</span>(educ)  <span class="kw">by</span>(sex) horizontal</span></code></pre></div>
<p><img src="04_bar_plots2.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<hr />
<p><strong><a href="dataviz.html#plt1">Übung1</a></strong></p>
<hr />
</div>
<div id="bivar_plot" class="section level2">
<h2><span class="header-section-number">4.3</span> Gemeinsame Verteilung zweier Variablen</h2>
<div id="mosaikplot" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Mosaikplot</h3>
<p>Für die gemeinsame Verteilung zweiter kategorialer Merkmale empfiehlt sich ein Mosaikplot. Dafür gibt es aber keinen Standardbefehl in Stata, sondern wir müssen den Befehl <code>spineplot</code> erst installieren:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb6-1"><a href="dataviz.html#cb6-1"></a><span class="kw">ssc</span> install spineplot <span class="co">// Befehl installieren (nur 1x nötig)</span></span>
<span id="cb6-2"><a href="dataviz.html#cb6-2"></a>spineplot educ  agec</span></code></pre></div>
<p><img src="04_mosaic.png" width="80%" style="display: block; margin: auto;" />
Ein Mosaikplot stellt die bedingen Häufigkeiten dar: die Breite der Säulen wird durch die Größe der Altersgruppen bestimmt. Die Anzahl der Befragten aus den jeweiligen Kategorien von <code>educ</code> bestimmen dann jeweils die Farbanteile innerhalb der Säulen.</p>
</div>
<div id="streudiagramm" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Streudiagramm</h3>
<p>Eine sehr weit verbreitete Darstellung für zwei metrische Variablen ist das sog. Streudiagramm (“scatter plot”), dieses bekommen wir mit <code>twoway scatter</code>. Bspw. können wir die gemeinsame Verteilung des Alters und des Einkommens der Befragten so darstellen:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb7-1"><a href="dataviz.html#cb7-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="kw">scatter</span> inc age</span></code></pre></div>
<p><img src="04_twoway1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="weitere-twoway-grafiken" class="section level2">
<h2><span class="header-section-number">4.4</span> Weitere <code>twoway</code> Grafiken</h2>
<p>Eben kam bereits der Befehl <code>twoway</code> vor. <code>twoway</code> stellt eine ganze Reihe an Darstellungen zur Auswahl, die wir hier nicht besprochen haben. Eine Übersicht zu allen verfügbaren Visualierungen inklusive Beispielbefehlen findet sich beispielsweise <a href="https://www.stata.com/support/faqs/graphics/gph/stata-graphs/">hier</a> oder <a href="https://www.stata.com/features/example-graphs/">hier</a>.</p>
</div>
<div id="twoway_comb" class="section level2">
<h2><span class="header-section-number">4.5</span> Kombinieren von zwei twoway-Grafiken</h2>
<p>Eine besonders hilfreiche Funktion ist das Übereinanderlegen mehrer <code>twoway</code> Grafiken. Dazu hängen wir die Befehle mit <code>(scatter ...) (scatter ...)</code> einfach aneinander. Mit dieser Strategie können wir zwei nach Geschlechtern getrennte Streudiagramme aufeinander legen und so die Punkte farblich unterscheidbar machen:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb8-1"><a href="dataviz.html#cb8-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1) (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2)</span></code></pre></div>
<p><img src="04_scatter_bysex.png" width="80%" style="display: block; margin: auto;" />
Hier haben wir also jetzt blaue Punkte für <code>sex == 1</code> und rote Punkte für <code>sex == 2</code>. Leider sagt uns die Legende aber überhaupt nichts dazu. Dazu kommen wir <a href="dataviz.html#legend">gleich</a>.</p>
</div>
<div id="gruppierte-boxplots" class="section level2">
<h2><span class="header-section-number">4.6</span> Gruppierte Boxplots</h2>
<p>Auf ähnliche Weise können wir auch Boxplots nebeneinander legen. Auch hier geben wir nach dem Grafikkommando <code>graph box</code> die Subgruppen für die jeweiligen Variablen an. Allerdings funktioniert das hier leider nicht direkt mit <code>if</code>. Wir müssen stattdessen einen Zwischenschritt gehen und separate Variablen für jede Untergruppe erstellen.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb9-1"><a href="dataviz.html#cb9-1"></a><span class="kw">gen</span> inc1 = inc <span class="kw">if</span> educ == 1</span>
<span id="cb9-2"><a href="dataviz.html#cb9-2"></a><span class="kw">gen</span> inc2 = inc <span class="kw">if</span> educ == 2</span>
<span id="cb9-3"><a href="dataviz.html#cb9-3"></a><span class="kw">gen</span> inc3 = inc <span class="kw">if</span> educ == 3</span>
<span id="cb9-4"><a href="dataviz.html#cb9-4"></a><span class="kw">gen</span> inc4 = inc <span class="kw">if</span> educ == 4</span>
<span id="cb9-5"><a href="dataviz.html#cb9-5"></a><span class="kw">gen</span> inc5 = inc <span class="kw">if</span> educ == 5</span>
<span id="cb9-6"><a href="dataviz.html#cb9-6"></a><span class="kw">graph</span> box inc1 inc2 inc3 inc4 inc5</span></code></pre></div>
<p><img src="04_box_byeduc.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Das hat den Vorteil, dass wir dann gruppierte Boxplots nach Geschlecht erstellen können, wenn wir zusätzlich <code>,by(sex)</code> anhängen:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb10-1"><a href="dataviz.html#cb10-1"></a><span class="kw">graph</span> box inc1 inc2 inc3 inc4 inc5, <span class="kw">by</span>(sex)</span></code></pre></div>
<p><img src="04_box_educ_bysex.png" width="80%" style="display: block; margin: auto;" /></p>
<hr />
<p><strong><a href="dataviz.html#plt2">Übung2</a></strong></p>
<hr />
</div>
<div id="übungen-4" class="section level2">
<h2><span class="header-section-number">4.7</span> Übungen 4</h2>
<div id="plt1" class="section level3">
<h3><span class="header-section-number">4.7.1</span> Übung 4-1</h3>
<ol class="example" style="list-style-type: decimal">
<li>Laden Sie den kumulierten Allbusdatensatz (<code>Allbus_1980-2018.dta</code>) in Stata und wählen Sie die Befragten aus dem Jahr 2014 aus! Erstellen Sie einen Boxplot, ein Histogramm und einen k-Density-Plot für den BMI der Befragten (<code>hs18</code>).
<ul>
<li>Vergessen Sie nicht, die Missings mit <code>mvdecode</code> zu überschreiben oder mit <code>keep</code>/<code>drop</code> auszuschließen.</li>
<li>Überprüfen Sie z.B. mit <code>summary</code>, ob alle negativen Werte ausgeschlossen wurden.</li>
<li>Erstellen Sie eine weitere Variante dieser Grafiken, welche die Verteilung des BMIs jeweils nach Geschlecht zeigen.</li>
</ul></li>
<li>Erstellen Sie ebenfalls für die Befragten aus dem Jahr 2014 eine Grafik, welche die Häufigkeit der Befragten aus den alten und neuen Bundesländern (<code>eastwest</code>) wiedergibt!
<ul>
<li>Erstellen Sie sowohl ein Säulen- als auch ein Balkendiagramm!</li>
<li>Erstellen Sie eine weitere Darstellung, welche zusätzlich nach dem Geschlecht unterscheidet!</li>
</ul></li>
</ol>
<p><a href="dataviz.html#bar_col">Zurück zu univariate Grafiken</a></p>
</div>
<div id="plt2" class="section level3">
<h3><span class="header-section-number">4.7.2</span> Übung 4-2</h3>
<ol start="3" class="example" style="list-style-type: decimal">
<li><p>Laden Sie den kumulierten Allbusdatensatz (<code>Allbus_1980-2018.dta</code>) erneut und wählen Sie die Befragten aus dem Jahr 2016 aus! Erstellen Sie einen Mosaikplot, welcher die Bildung der Befragten (<code>educ</code>) sowie deren Kontakte zu Ausländern bei der Arbeit (<code>mc02</code>) abbildet.</p>
<ul>
<li>Vergessen Sie nicht, die Missings mit <code>mvdecode</code> zu überschreiben oder mit <code>keep</code>/<code>drop</code> auszuschließen.</li>
<li>Überprüfen Sie z.B. mit <code>table</code>, ob alle negativen Werte ausgeschlossen wurden.</li>
<li>Betrachten Sie die Darstellung: welche Merkmalskombination aus <code>educ</code> und <code>mc02</code> ist die häufigste? Überprüfen Sie ihre Einschätzung mit Hilfe einer Kontingenztabelle (<code>tab educ mc02</code>)</li>
</ul></li>
<li><p>Erstellen Sie einen Scatterplot für das Alter <code>age</code> und <code>xt11</code>, die Bearbeitungsdauer des Politikquiz. Erstellen Sie den Scatterplot so, dass die Befragte aus Ost und West durch unterschiedliche Farben markert sind - so wie es <a href="dataviz.html#twoway_comb">hier</a> gemacht wurde!</p></li>
<li><p>Laden Sie den Allbus 2018 (<code>Allbus_2018.dta</code>) und erstellen Sie einen Boxplot zur Bearbeitungsdauer des Politikquiz!</p>
<ul>
<li>Erstellen Sie einen gruppierte Darstellung, je nachdem ob die Befragten aus den alten und neuen Bundesländern (<code>eastwest</code>) kommen!</li>
<li>Splitten Sie diese Darstellung zusätzlich nach dem Geschlecht der Befragten auf!</li>
</ul></li>
</ol>
<p><img src="04_xt11_cdb.png" width="80%" style="display: block; margin: auto;" /></p>
<p><a href="dataviz.html#bivar_plot">Zurück zu bivariaten Grafiken</a></p>
</div>
<div id="weitere-übungen-kap4" class="section level3">
<h3><span class="header-section-number">4.7.3</span> Weitere Übungen Kap4</h3>
<ol start="6" class="example" style="list-style-type: decimal">
<li><p>Wählen Sie eine der oben erstellten Grafiken aus und</p>
<ul>
<li>verändern Sie den Titel, Untertitel und Achsenbeschriftung, siehe <a href="dataviz.html#title">hier</a>.</li>
<li>Verändern Sie die Form/Farben der Punkte, Balken oder Box! Siehe <a href="dataviz.html#mark">hier</a> und <a href="dataviz.html#color">hier</a></li>
</ul></li>
<li><p>Verändern Sie die Legende des Scatterplots aus Aufgabe 4 - siehe <a href="dataviz.html#color">hier</a></p></li>
<li><p>Erstellen Sie eine Alterspyramide für ein Jahr aus dem kumulierten Allbus! Laden Sie dafür den kumulierten Allbus und wählen ein Jahr aus (<code>tab year</code> zeigt Ihnen, welche Auswahl sie haben). Vollziehen Sie dann die <a href="dataviz.html#pyramid">hier</a> gezeigten Schritte nach! Passen Sie Farben, Schrift usw. nach Ihren Vorstellungen an! Sie können anstatt der Altersgruppen auch bspw. die Bildungsgruppen <code>educ</code> oder Wohnortgröße <code>gkpol</code> verwenden!</p></li>
</ol>
</div>
</div>
<div id="optionen" class="section level2">
<h2><span class="header-section-number">4.8</span> Optionen</h2>
<p>Diese grundlegenden Darstellungen können mit Hilfe einer ganzen Reihe an Optionen angepasst werden. Auch hier beschränken wir uns auf die wesentlichsten Optionen. Bei konkreten Fragen hilft oftmals auch eine Google-Suche nach: “stata graph text smaller” o.ä.</p>
<div id="title" class="section level3">
<h3><span class="header-section-number">4.8.1</span> Titel</h3>
<p>Eine klare Beschriftung ist zentraler Bestandteil jeder Datenvisualisierung. Folgende Überschriften stehen uns dazu zur Verfügung:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb11-1"><a href="dataviz.html#cb11-1"></a><span class="kw">graph</span> ...., <span class="bn">title</span>(<span class="st">&quot;Titel&quot;</span>) <span class="bn">subtitle</span>(<span class="st">&quot;Untertitel&quot;</span>) <span class="bn">xtitle</span>(<span class="st">&quot;x-Achsentitel&quot;</span>) <span class="bn">ytitle</span>(<span class="st">&quot;y-Achsentitel&quot;</span>) <span class="bn">caption</span>(<span class="st">&quot;Bildunterschrift&quot;</span>)</span></code></pre></div>
<p><img src="04_scatter_title.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Weitere Optionen unter <code>help title_options</code>.</p>
</div>
<div id="achsenbeschriftung" class="section level3">
<h3><span class="header-section-number">4.8.2</span> Achsenbeschriftung</h3>
<p>Außerdem können wir die Achsenbeschriftungen verändern - hier ein Beispiel für die x-Achse<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<ul>
<li><code>xscale(range(0 100))</code> <span class="math inline">\(\rightarrow\)</span> x-Achse auf 0-100 ausdehnen</li>
<li><code>xtick(0 (10) 100 )</code> <span class="math inline">\(\rightarrow\)</span> an allen Zehner-Grenzen zwischen 0 und 100, <code>0(10)100</code> ist die Abkürzung für <code>0,10,20,30,40,50,60,70,80,90,100</code></li>
<li><code>xlabel(0 "Null" 10 "zehn" 20 (10) 100)</code> <span class="math inline">\(\rightarrow\)</span> Beschriftung der “ticks”</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb12-1"><a href="dataviz.html#cb12-1"></a><span class="kw">graph</span> .... , <span class="bn">xscale</span>(<span class="kw">range</span>(0 100)) xtick(0 (10) 100 )` <span class="kw">xlabel</span>(0 <span class="st">&quot;Null&quot;</span> 10 <span class="st">&quot;zehn&quot;</span> 20 (10) 100) </span></code></pre></div>
<p><img src="04_scatter_axis.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Mehr Optionen finden sich unter <code>help axis_label_options</code>. Bspw. kann man mit <code>xlabel(..., alternate)</code> die Achsenlabels nach oben und unten verschieben.</p>
</div>
<div id="text-einfügen" class="section level3">
<h3><span class="header-section-number">4.8.3</span> Text einfügen</h3>
<p>Wir können mit <code>text()</code> auch ein Text auf der Grafik positionieren - wie geben erst die y-Koordinate, dann die x-Koordinate an und dann den gewünschten Text:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb13-1"><a href="dataviz.html#cb13-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="kw">scatter</span> inc age, <span class="bn">text</span>(17500 80 <span class="st">&quot;text&quot;</span>)</span></code></pre></div>
<p><img src="04_scatter_text.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="font" class="section level3">
<h3><span class="header-section-number">4.8.4</span> Schriftart &amp; Textgröße</h3>
<p>Eine Reihe an Schriftarten stehen für Textangaben zur Verfügung:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb14-1"><a href="dataviz.html#cb14-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="kw">scatter</span> inc age, <span class="co">///</span></span>
<span id="cb14-2"><a href="dataviz.html#cb14-2"></a><span class="bn">title</span>(<span class="st">&quot;{stSerif:Einkommen {bf:fett} {it:kursiv}}&quot;</span>) <span class="co">///</span></span>
<span id="cb14-3"><a href="dataviz.html#cb14-3"></a>  <span class="bn">subtitle</span>(<span class="st">&quot;Text{superscript:hochgestellt}{subscript:tiefgestellt}&quot;</span>) <span class="co">/// </span></span>
<span id="cb14-4"><a href="dataviz.html#cb14-4"></a>  <span class="bn">xtitle</span>(<span class="st">&quot;Alter {it:age}&quot;</span>) <span class="bn">ytitle</span>(<span class="st">&quot;{stMono:Einkommen}&quot;</span>) <span class="co">///</span></span>
<span id="cb14-5"><a href="dataviz.html#cb14-5"></a>  <span class="kw">xlabel</span>(0 <span class="st">&quot; {stMono:Null}&quot;</span> 10 <span class="st">&quot;{bf:zehn}&quot;</span> 20 (10) 100) <span class="co">///</span></span>
<span id="cb14-6"><a href="dataviz.html#cb14-6"></a>  <span class="bn">text</span>(15000 20 <span class="st">&quot;Hier ein Symbol: {&amp;Omega}&quot;</span>) <span class="bn">xscale</span>(<span class="kw">range</span>(0 100))</span></code></pre></div>
<p><img src="04_scatter_text_fmts.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Mehr dazu unter <code>help graph_text</code></p>
<p>Außerdem können wir mit der Option <code>size</code> die jeweilige Größe des Textes anpassen, dabei können wir die Größenangaben aus der <a href="#msymbol_size_overview">Palette</a> verwenden. Mit der Option <code>angle(90)</code> können wir außerdem den Text um 90 Grad (und natürlich um jeden beliebigen Wert durch entsprechende Angabe):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb15-1"><a href="dataviz.html#cb15-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="kw">scatter</span> inc age, <span class="co">///</span></span>
<span id="cb15-2"><a href="dataviz.html#cb15-2"></a> <span class="bn">title</span>(<span class="st">&quot;Text1&quot;</span>, <span class="kw">size</span>(vsmall)) <span class="co">///</span></span>
<span id="cb15-3"><a href="dataviz.html#cb15-3"></a> <span class="bn">subtitle</span>(<span class="st">&quot;Untertitel&quot;</span>,<span class="kw">size</span>(large)) <span class="co">/// </span></span>
<span id="cb15-4"><a href="dataviz.html#cb15-4"></a>  <span class="bn">xtitle</span>(<span class="st">&quot;Alter&quot;</span>,<span class="kw">size</span>(small)) <span class="bn">ytitle</span>(<span class="st">&quot;{stMono:Einkommen}&quot;</span>,<span class="kw">size</span>(vhuge)) <span class="co">///</span></span>
<span id="cb15-5"><a href="dataviz.html#cb15-5"></a>  <span class="kw">xlabel</span>(0 <span class="st">&quot; {stMono:Null}&quot;</span> 10 <span class="st">&quot;{bf:zehn}&quot;</span> 20 (10) 100 , <span class="bn">labsize</span>(tiny) angle(90))</span></code></pre></div>
<p><img src="04_scatter_text_size.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Wenn die Option <a href="dataviz.html#bar_col"><code>over</code></a> verwendet wird, dann müssen die Textoptionen in <code>over</code> angegeben werden:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb16-1"><a href="dataviz.html#cb16-1"></a><span class="kw">graph</span> <span class="bn">bar</span> (<span class="fu">count</span>) respid, <span class="co">/// </span></span>
<span id="cb16-2"><a href="dataviz.html#cb16-2"></a>  <span class="bn">over</span>(gkpol,<span class="kw">label</span>(<span class="bn">labsize</span>(small) angle(90)))</span></code></pre></div>
<p><img src="04_scatter_text_over.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="legend" class="section level3">
<h3><span class="header-section-number">4.8.5</span> Legende</h3>
<p>Oben hatten wir gesehen, dass die automatische Legende nicht unbedingt aussagekräftig ist. Mit der Option <code>legend</code> können wir die Legende beschriften und einen Titel vergeben:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb17-1"><a href="dataviz.html#cb17-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1) (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2), <span class="co">///</span></span>
<span id="cb17-2"><a href="dataviz.html#cb17-2"></a>  <span class="bn">legend</span>(lab(1 <span class="st">&quot;Männer&quot;</span>) lab(2 <span class="st">&quot;Frauen&quot;</span>) <span class="bn">title</span>(<span class="st">&quot;Geschlecht&quot;</span>))</span></code></pre></div>
<p><img src="04_scatter_bysex_legend.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Mit der Option <code>pos</code> können wir außerdem die Position der Legende anpassen - wir geben dabei eine Zahl zwischen 0 und 12 an. Die Werte 1-12 entsprechen die Stunden auf einer Uhr, 0 setzt die Legende in die Mitte der Grafik.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb18-1"><a href="dataviz.html#cb18-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1) (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2), <span class="co">///</span></span>
<span id="cb18-2"><a href="dataviz.html#cb18-2"></a>  <span class="bn">legend</span>(lab(1 <span class="st">&quot;Männer&quot;</span>) lab(2 <span class="st">&quot;Frauen&quot;</span>) <span class="bn">title</span>(<span class="st">&quot;Geschlecht&quot;</span>) pos(9))</span></code></pre></div>
<p><img src="04_scatter_bysex_legend_pos.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Weitere Optionen und Beispiele unter <code>help legend_options</code>. Mit <code>legend(off)</code> kann die Legende auch ausgeblendet werden.</p>
</div>
<div id="mark" class="section level3">
<h3><span class="header-section-number">4.8.6</span> Marker</h3>
<p>Im Stata-Jargon werden die Punkte “marker” genannt. Deren Aussehen können wir mit entsprechenden Optionen ebenfalls verändern. Zum einen können wir mit <code>msymbol</code> die Form des Markers verändern, mit <code>msize</code> können wir die Größe und mit <code>mcolor</code> die Farbe anpassen:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb19-1"><a href="dataviz.html#cb19-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="kw">scatter</span> inc age, <span class="bn">msymbol</span>(D) msize(small) mcolor(<span class="bn">sand</span>)</span></code></pre></div>
<p><img src="04_msym_size.png" width="80%" height="80%" style="display: block; margin: auto;" />
Dabei können wir aus einer Reihe an Formen, Größen und Farben wählen:
<img src="04_msymbol.png" width="60%" height="80%" style="display: block; margin: auto;" /><img src="04_msize.png" width="60%" height="80%" style="display: block; margin: auto;" /><img src="04_mcolor.png" width="60%" height="80%" style="display: block; margin: auto;" /></p>
<p>In unserem Beispiel vorhin hatten wir die Farben der marker aber genutzt, um die Angaben für Männer und Frauen zu unterscheiden. Hier geben wir dann <code>mcolor</code> etc. jeweils innerhalb der Klammern an:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb20-1"><a href="dataviz.html#cb20-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="co">/// </span></span>
<span id="cb20-2"><a href="dataviz.html#cb20-2"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1, mcolor(<span class="bn">orange</span>) msize(small)) <span class="co">///</span></span>
<span id="cb20-3"><a href="dataviz.html#cb20-3"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2, mcolor(<span class="bn">sand</span>) <span class="bn">msymbol</span>(D) msize(small)), <span class="co">///</span></span>
<span id="cb20-4"><a href="dataviz.html#cb20-4"></a>  <span class="bn">legend</span>(lab(1 <span class="st">&quot;Männer&quot;</span>) lab(2 <span class="st">&quot;Frauen&quot;</span>)) </span></code></pre></div>
<p><img src="04_mcolor_sex.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Mit <code>mlcolor</code> und <code>mlwidth</code> können wir jedem marker die Farbe und Dicke der Umrandung angeben. Zur Auswahl stehen: <code>vthin</code>,<code>thin</code>,<code>medthin</code>,<code>medium</code>,<code>medthick</code>,<code>thick</code>,<code>vthick</code>,<code>vvthick</code>,<code>vvvthick</code></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb21-1"><a href="dataviz.html#cb21-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="co">/// </span></span>
<span id="cb21-2"><a href="dataviz.html#cb21-2"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1, mcolor(<span class="bn">orange</span>) msize(small) mlcolor(gs3) mlwidth(vthin)) <span class="co">///</span></span>
<span id="cb21-3"><a href="dataviz.html#cb21-3"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2, mcolor(<span class="bn">sand</span>) <span class="bn">msymbol</span>(D) msize(small) mlcolor(gs3) mlwidth(vvthin)), <span class="co">///</span></span>
<span id="cb21-4"><a href="dataviz.html#cb21-4"></a>  <span class="bn">legend</span>(lab(1 <span class="st">&quot;Männer&quot;</span>) lab(2 <span class="st">&quot;Frauen&quot;</span>)) </span></code></pre></div>
<p><img src="04_ml_sex.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="color" class="section level3">
<h3><span class="header-section-number">4.8.7</span> Farben</h3>
<p>Obwohl es um Darstellungen geht, haben wir noch sehr wenig über Farben gesprochen. Neben den oben gezeigten vordefinierten Farben können wir auch Farben als RGB-Codes<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> angeben und so Farben eigenen Paletten verwenden:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb22-1"><a href="dataviz.html#cb22-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="co">/// </span></span>
<span id="cb22-2"><a href="dataviz.html#cb22-2"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1, mcolor(<span class="st">&quot;91 37 97&quot;</span>) msize(small)) <span class="co">///</span></span>
<span id="cb22-3"><a href="dataviz.html#cb22-3"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2, mcolor(<span class="st">&quot;150 196 134&quot;</span>) <span class="bn">msymbol</span>(D) msize(small)), <span class="co">///</span></span>
<span id="cb22-4"><a href="dataviz.html#cb22-4"></a>  <span class="bn">legend</span>(lab(1 <span class="st">&quot;Männer&quot;</span>) lab(2 <span class="st">&quot;Frauen&quot;</span>))</span></code></pre></div>
<p><img src="04_col_scatter.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Farbpaletten sind ein Thema für sich und was gut aussieht ist natürlich subjektiv…. Allerdings gibt es einige Leitlinien, siehe <a href="https://blog.datawrapper.de/beautifulcolors/">hier</a>. Es gibt zahlreiche Möglichkeiten selbst zu erstellen: zB. mit <a href="https://color.adobe.com/create/color-wheel">Adobe Color</a> oder <a href="https://paletton.com/">Paletton</a>. Außerdem gibt es unzählige Quellen für Farbpaletten: <a href="https://www.instagram.com/colours.cafe/">Instagram</a> oder <a href="https://colorbrewer2.org">ColorBrewer</a>.</p>
<p>Manchmal ist es ratsam, eine den Markern/Säulen/… eine gewisse Transparenzu geben. Durch anhängen von <code>%30</code> können wir bspw. die Deckkraft auf 30% heruntersetzen (je höher die Zahl, desto höher die Deckkfraft):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb23-1"><a href="dataviz.html#cb23-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="co">///</span></span>
<span id="cb23-2"><a href="dataviz.html#cb23-2"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1, mcolor(<span class="st">&quot;91	37 97 %30&quot;</span>) msize(small)) <span class="co">///</span></span>
<span id="cb23-3"><a href="dataviz.html#cb23-3"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2, mcolor(<span class="st">&quot;150 196 134 %30&quot;</span>) <span class="bn">msymbol</span>(D) msize(small)), <span class="co">///</span></span>
<span id="cb23-4"><a href="dataviz.html#cb23-4"></a>  <span class="bn">legend</span>(lab(1 <span class="st">&quot;Männer&quot;</span>) lab(2 <span class="st">&quot;Frauen&quot;</span>))</span></code></pre></div>
<p><img src="04_col_scatter_opacity.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p><strong>Leider gibt es diese Funktion erst ab Stata 15 aufwärts.</strong></p>
<p>Außerdem können wir mit <code>plotregion(fcolor( ))</code> und <code>graphregion(fcolor( ))</code> die Hintergrundfarben der Grafik und des Koordinatenbereichs anpassen. Mit <code>region(fcolor( ))</code> können wir die den Hintergrund der Legende verändern:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb24-1"><a href="dataviz.html#cb24-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="co">///</span></span>
<span id="cb24-2"><a href="dataviz.html#cb24-2"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==1, mcolor(<span class="st">&quot;91	37 97&quot;</span>) msize(small)) <span class="co">///</span></span>
<span id="cb24-3"><a href="dataviz.html#cb24-3"></a>  (<span class="kw">scatter</span> inc age <span class="kw">if</span> sex==2, mcolor(<span class="st">&quot;150 196 134&quot;</span>) <span class="bn">msymbol</span>(D)), <span class="co">///</span></span>
<span id="cb24-4"><a href="dataviz.html#cb24-4"></a>  <span class="bn">legend</span>(lab(1 <span class="st">&quot;Männer&quot;</span>) lab(2 <span class="st">&quot;Frauen&quot;</span>) region(fcolor(<span class="kw">red</span>))) <span class="co">///</span></span>
<span id="cb24-5"><a href="dataviz.html#cb24-5"></a>  <span class="bn">plotregion</span>(fcolor(<span class="bn">eltblue</span>)) graphregion(fcolor(<span class="bn">olive_teal</span>))</span></code></pre></div>
<p><img src="04_bg_col.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<div id="boxplots-anpassen" class="section level4">
<h4><span class="header-section-number">4.8.7.1</span> Boxplots anpassen</h4>
<p>Die Farben in Boxplots können wir mit <code>box</code> anpassen - bei mehreren Boxen geben wir zuerst eine Zahl an, auf welche Box sich die Optionen beziehen sollen. Die Ausreißer können wir mit <code>marker</code> berarbeiten:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb25-1"><a href="dataviz.html#cb25-1"></a><span class="kw">graph</span> box inc1 inc2 , <span class="co">///</span></span>
<span id="cb25-2"><a href="dataviz.html#cb25-2"></a>	box(1, <span class="kw">color</span>(<span class="st">&quot;orange&quot;</span>) blcolor(<span class="bn">black</span>)) marker(1, mcolor(<span class="st">&quot;purple&quot;</span>)  <span class="bn">msymbol</span>(<span class="st">&quot;Dh&quot;</span>) ) <span class="co">///</span></span>
<span id="cb25-3"><a href="dataviz.html#cb25-3"></a>	box(2, <span class="kw">color</span>(<span class="st">&quot;159 97 184&quot;</span>) blcolor(<span class="bn">navy</span>)) marker(2, mcolor(<span class="st">&quot;gs45&quot;</span>)  <span class="bn">msymbol</span>(<span class="st">&quot;Sh&quot;</span>) ) </span></code></pre></div>
<p><img src="04_box_col.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="balkensäulendigramme-anpassen" class="section level4">
<h4><span class="header-section-number">4.8.7.2</span> Balken/Säulendigramme anpassen</h4>
<p>Für Balkendiagramme ist <code>bar()</code> die richtige Option. Mit <code>fcolor</code> können wir die Flächenfarbe anpassen, mit <code>color</code> die Umrandung.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb26-1"><a href="dataviz.html#cb26-1"></a><span class="kw">graph</span> <span class="bn">bar</span> (<span class="fu">count</span>) respid, <span class="bn">over</span>(eastwest) <span class="bn">bar</span>(1,fcolor(<span class="bn">orange</span>) <span class="kw">color</span>(gs4))</span></code></pre></div>
<p><img src="04_bar_col.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Leider ist die unterschiedliche Einfärbung von Balken etwas komplizierter, hierzu müssen wir erst mit <code>collapse</code> den Datensatz umformen. Siehe <a href="dataviz.html#pyramid">hier</a>.</p>
</div>
</div>
<div id="vorlagen" class="section level3">
<h3><span class="header-section-number">4.8.8</span> Vorlagen</h3>
<p>Eine Alternative ist auf Grafik-Schemata zuzückzugreifen. Beispielsweise wird mit <code>, scheme(sj)</code> die Grafik nach den Vorlage des Stata Journals erstellt:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb27-1"><a href="dataviz.html#cb27-1"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="kw">scatter</span> inc age , <span class="dv">scheme</span>(sj)</span></code></pre></div>
<p><img src="04_sjtheme.png" width="80%" height="80%" style="display: block; margin: auto;" /></p>
<p>Mit <code>graph query, schemes</code> wird eine Liste der verfügbaren Schemata angezeigt.</p>
<p>Weitere Optionen bieten zB die <a href="https://www.stata-journal.com/article.html?article=gr0070">blindschemes</a> von Daniel Bischof. Diese müssen zunächst mit <code>ssc install blindschemes</code> installiert werden und stehen dann zur Verfügung, zB</p>
<p>Hier noch ein Beispiel mit <code>plotplain</code> aus <code>blindschemes</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb28-1"><a href="dataviz.html#cb28-1"></a><span class="kw">ssc</span> install blindschemes</span>
<span id="cb28-2"><a href="dataviz.html#cb28-2"></a><span class="kw">graph</span> <span class="kw">twoway</span> <span class="kw">scatter</span> inc age, <span class="dv">scheme</span>(plotplain) </span></code></pre></div>
<p><img src="04_plotplain_theme.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="anhang-beispiele-zum-selbst-anpassen" class="section level2">
<h2><span class="header-section-number">4.9</span> Anhang &amp; Beispiele zum selbst anpassen</h2>
<p>Im Folgenden finden sich nun einige Beispiele mit (sehr) vielen Optionen als Vorlage für eigene Anpassungen. Trial &amp; error wärmstens empfohlen!</p>
<div id="boxplot" class="section level3">
<h3><span class="header-section-number">4.9.1</span> Boxplot</h3>
<p>Wie oben gezeigt, muss für gruppierte Boxplots (hier nach Geschlecht) muss die dargestellte Variable zunächst aufgesplittet werden:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb29-1"><a href="dataviz.html#cb29-1"></a>cd <span class="st">&quot;&quot;</span></span>
<span id="cb29-2"><a href="dataviz.html#cb29-2"></a><span class="kw">use</span> <span class="st">&quot;Allbus_2018.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb29-3"><a href="dataviz.html#cb29-3"></a><span class="kw">replace</span> inc = . <span class="kw">if</span> inc &lt; 0</span>
<span id="cb29-4"><a href="dataviz.html#cb29-4"></a><span class="kw">replace</span> age = . <span class="kw">if</span> age &lt; 0</span>
<span id="cb29-5"><a href="dataviz.html#cb29-5"></a></span>
<span id="cb29-6"><a href="dataviz.html#cb29-6"></a><span class="kw">egen</span> age_c = <span class="fu">cut</span>(age), <span class="fu">at</span>(20,35,50,65) <span class="co">// Alter in Gruppen</span></span>
<span id="cb29-7"><a href="dataviz.html#cb29-7"></a>lab def agec1 20 <span class="st">&quot;20-34&quot;</span> 35 <span class="st">&quot;35-49&quot;</span> 50 <span class="st">&quot;50-64&quot;</span> <span class="co">// Gruppen labeln</span></span>
<span id="cb29-8"><a href="dataviz.html#cb29-8"></a>lab val age_c agec1</span>
<span id="cb29-9"><a href="dataviz.html#cb29-9"></a><span class="co">// Einkommen in Männer und Frauen splitten:</span></span>
<span id="cb29-10"><a href="dataviz.html#cb29-10"></a><span class="kw">gen</span> inc_m = inc <span class="kw">if</span> sex == 1</span>
<span id="cb29-11"><a href="dataviz.html#cb29-11"></a><span class="kw">gen</span> inc_f = inc <span class="kw">if</span> sex == 2</span>
<span id="cb29-12"><a href="dataviz.html#cb29-12"></a>lab <span class="kw">var</span> inc_m <span class="st">&quot;Männer&quot;</span></span>
<span id="cb29-13"><a href="dataviz.html#cb29-13"></a>lab <span class="kw">var</span> inc_f <span class="st">&quot;Frauen&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb30-1"><a href="dataviz.html#cb30-1"></a><span class="kw">graph</span> box inc inc_f, <span class="bn">over</span>(age_c) <span class="co">///</span></span>
<span id="cb30-2"><a href="dataviz.html#cb30-2"></a><span class="dv">scheme</span>(lean1) <span class="co">///</span></span>
<span id="cb30-3"><a href="dataviz.html#cb30-3"></a>box(1, <span class="kw">color</span>(<span class="st">&quot;0 41 93&quot;</span>)) marker(1, mcolor(<span class="st">&quot;0 41 93&quot;</span>)  <span class="bn">msymbol</span>(<span class="st">&quot;o&quot;</span>) ) medline(lcolor(<span class="st">&quot;204 175 105&quot;</span>)) <span class="co">/// optionen box1</span></span>
<span id="cb30-4"><a href="dataviz.html#cb30-4"></a>box(2, <span class="kw">color</span>(<span class="st">&quot;146 143 107&quot;</span>)) marker(2, mcolor(<span class="st">&quot;146 143 107&quot;</span>)  <span class="bn">msymbol</span>(<span class="st">&quot;o&quot;</span>) ) <span class="co">/// box2 anpassen</span></span>
<span id="cb30-5"><a href="dataviz.html#cb30-5"></a><span class="bn">legend</span>(<span class="bn">cols</span>(2) pos(12) region(fcolor(<span class="st">&quot;249 247 241&quot;</span>) lcolor(<span class="st">&quot;16 74 138&quot;</span>)))  <span class="co">/// Legende</span></span>
<span id="cb30-6"><a href="dataviz.html#cb30-6"></a><span class="bn">ytitle</span>(<span class="st">&quot;{stSerif:Einkommen}{superscript:2018}&quot;</span>) b1title(<span class="st">&quot;Alter&quot;</span>) <span class="co">/// Achsenbeschriftung</span></span>
<span id="cb30-7"><a href="dataviz.html#cb30-7"></a><span class="bn">title</span>(<span class="st">&quot;Einkommen&quot;</span>) <span class="bn">caption</span>(<span class="st">&quot;{bf:Quelle}: Allbus 2018 {it:eigene Berechnungen}&quot;</span>,<span class="bn">position</span>(5)) <span class="co">/// titel usw.</span></span>
<span id="cb30-8"><a href="dataviz.html#cb30-8"></a><span class="bn">plotregion</span>(fcolor(<span class="st">&quot;252 251 248&quot;</span>)) graphregion(fcolor(<span class="st">&quot;249 247 241&quot;</span>)) <span class="co">// Hintergrundfarben</span></span></code></pre></div>
<p><img src="04_boxplot.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="scatterplot" class="section level3">
<h3><span class="header-section-number">4.9.2</span> Scatterplot</h3>
<p>Hier ein angepasster Scatterplot, welcher aus drei überlagerten <a href="dataviz.html#twoway_comb"><code>scatter</code></a> besteht:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb31-1"><a href="dataviz.html#cb31-1"></a><span class="kw">webuse</span> bpwide, <span class="kw">clear</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb32-1"><a href="dataviz.html#cb32-1"></a><span class="kw">graph</span> <span class="kw">twoway</span>  <span class="co">///</span></span>
<span id="cb32-2"><a href="dataviz.html#cb32-2"></a>( <span class="kw">scatter</span> bp_before bp_after <span class="kw">if</span> agegrp == 1, mc(<span class="st">&quot;0 62 81&quot;</span>) <span class="bn">msymbol</span>(o) ) <span class="co">/// Altersgruppe 1 -&gt; dunkle Punkte</span></span>
<span id="cb32-3"><a href="dataviz.html#cb32-3"></a>( <span class="kw">scatter</span> bp_before bp_after <span class="kw">if</span> agegrp == 2, mc(<span class="st">&quot;0 125 186&quot;</span>) <span class="bn">msymbol</span>(<span class="kw">d</span>)  ) <span class="co">/// Altersgruppe 2 -&gt; blaue Rhomben</span></span>
<span id="cb32-4"><a href="dataviz.html#cb32-4"></a>( <span class="kw">scatter</span> bp_before bp_after <span class="kw">if</span> agegrp == 3, mc(<span class="st">&quot;214 210 196&quot;</span>) <span class="bn">msymbol</span>(<span class="fu">s</span>)  ) <span class="co">/// Altersgruppe 3 -&gt; Vierecke</span></span>
<span id="cb32-5"><a href="dataviz.html#cb32-5"></a>, <span class="dv">scheme</span>(lean2) <span class="co">/// Schema</span></span>
<span id="cb32-6"><a href="dataviz.html#cb32-6"></a><span class="bn">legend</span>(lab(1 <span class="st">&quot;30-45&quot;</span>) lab(2 <span class="st">&quot;{stMono:46-59}&quot;</span>) lab(3 <span class="st">&quot;60+&quot;</span>) lcolor(<span class="st">&quot;16 74 138&quot;</span>) region(fcolor(<span class="st">&quot;249 247 241&quot;</span>) lcolor(<span class="st">&quot;16 74 138&quot;</span>)) pos(6) <span class="bn">cols</span>(3)  )  <span class="co">/// legende -&gt; 3 Spalten</span></span>
<span id="cb32-7"><a href="dataviz.html#cb32-7"></a><span class="bn">xtitle</span>(<span class="st">&quot;{stSerif:Blutdruck nachher}&quot;</span>) <span class="bn">ytitle</span>(<span class="st">&quot;{stMono:Blutdruck vorher}&quot;</span>) <span class="co">/// Achsenbeschriftung</span></span>
<span id="cb32-8"><a href="dataviz.html#cb32-8"></a><span class="bn">text</span>(185 172 <span class="st">&quot;Ein Text&quot;</span> <span class="st">&quot;über {stSerif: 2} Zeilen&quot;</span>) <span class="bn">title</span>(<span class="st">&quot;{&amp;Delta}p={stSerif:R}*V&quot;</span>) <span class="co">// Textfeld einfügen</span></span></code></pre></div>
<p><img src="04_scatter_manyopts.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="pyramid" class="section level3">
<h3><span class="header-section-number">4.9.3</span> Bevölkerungspyramide</h3>
<p>Häufig ist die größte Herausforderung, die Daten so umzustellen, dass sie zum gewünschten <code>graph</code>-Befehl passen. Ein Beispiel ist die Erstellung einer Bevölkerungspyramide aus den Allbusdaten:</p>
<p><img src="04_pyramid.png" width="60%" height="60%" style="display: block; margin: auto;" /></p>
<p>Auch diese Bevölkerungspyramide lässt sich als Stata-Grafik erstellen. Allerdings müssen dazu einige Zwischenschritte durchlaufen, die fortgeschrittene Datenaufbereitung mit <code>collapse</code> voraussetzen. Außerdem könnte ein Teil der Aufbereitung mit <code>separate</code> abgekürzt werden. Mehr Informationen dazu finden sich am Ende dieses Skripts in Kapitel <a href="adva.html#adva">11</a>.</p>
<p>Die grundsätzliche Funktion für die Bevölkerungspyramide ist ein Balkendiagramm mit <code>graph twoway bar , horizontal</code>. Die Länge der Balken soll jeweils durch die Anzahl der Fälle in jeder Altersstufe, getrennt nach Geschlecht, bestimmt werden. Dazu müssen wir also zunächst die Anzahl der Befragten pro Alterstufe und Geschlecht bestimmen. Wenn wir den Allbus 2018 laden, haben wir ja einen Datensatz mit einer Zeile pro Person. Was wir jetzt aber benötigen ist eine Variante, in der wir den Datensatz sozusagen “zusammenschieben”: wir brauchen jeweils eine Zeile pro Altersstufe und Geschlecht und eine Variable mit der Zahl der Befragten.</p>
<pre><code>  age sex Anzahl_Befragte
1  18   1              15
2  18   2              11
3  19   1              22
4  19   2              15
5  20   1              18
6  20   2              16</code></pre>
<p>Um dorthin zu kommen, steht uns der <code>collapse</code>-Befehl zur Verfügung:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb34-1"><a href="dataviz.html#cb34-1"></a>cd <span class="st">&quot;&quot;</span></span>
<span id="cb34-2"><a href="dataviz.html#cb34-2"></a><span class="kw">use</span> <span class="st">&quot;Allbus_2018.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb34-3"><a href="dataviz.html#cb34-3"></a><span class="kw">tab</span> agec</span>
<span id="cb34-4"><a href="dataviz.html#cb34-4"></a><span class="kw">keep</span> <span class="kw">if</span> sex &gt; 0</span>
<span id="cb34-5"><a href="dataviz.html#cb34-5"></a><span class="kw">keep</span> <span class="kw">if</span> agec &gt; 0</span>
<span id="cb34-6"><a href="dataviz.html#cb34-6"></a><span class="kw">collapse</span> (<span class="fu">count</span>) respid , <span class="kw">by</span>(sex age)</span>
<span id="cb34-7"><a href="dataviz.html#cb34-7"></a><span class="ot">list</span> <span class="kw">in</span> 1/8</span></code></pre></div>
<p>Unter respid ist jetzt die Zahl der Befragten in der jeweiligen Kombination aus <code>age</code> und <code>sex</code> abgelegt:</p>
<pre><code>  age sex respid
1  18   1     15
2  18   2     11
3  19   1     22
4  19   2     15
5  20   1     18
6  20   2     16
7  21   1     21
8  21   2     13</code></pre>
<p>Um verwirrung zu vermeiden, benennen wir <code>respid</code> in <code>total</code> um:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb36-1"><a href="dataviz.html#cb36-1"></a><span class="kw">rename</span> respid Anzahl_Befragte</span></code></pre></div>
<p>Allerdings möchten wir jetzt die Angaben für Frauen und Männer in getrennte Variablen ablegen.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb37-1"><a href="dataviz.html#cb37-1"></a><span class="kw">gen</span> total_m = Anzahl_Befragte <span class="kw">if</span> sex == 1</span>
<span id="cb37-2"><a href="dataviz.html#cb37-2"></a><span class="kw">gen</span> total_f = Anzahl_Befragte <span class="kw">if</span> sex == 2</span>
<span id="cb37-3"><a href="dataviz.html#cb37-3"></a><span class="ot">list</span> <span class="kw">in</span> 1/10</span></code></pre></div>
<pre><code>   age sex total total_m total_f
1   18   1    15      15       .
2   18   2    11       .      11
3   19   1    22      22       .
4   19   2    15       .      15
5   20   1    18      18       .
6   20   2    16       .      16
7   21   1    21      21       .
8   21   2    13       .      13
9   22   1    18      18       .
10  22   2    15       .      15</code></pre>
<p>Jetzt können wir daraus ein Balkendiagramm erstellen, wobei wir zwei <code>twoway</code> kombinieren - wie schon beim Scatterplot:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb39-1"><a href="dataviz.html#cb39-1"></a><span class="kw">twoway</span>( <span class="bn">bar</span> total_m age, horizontal )(<span class="bn">bar</span> total_f age, horizontal)</span></code></pre></div>
<p><img src="04_pyramid001.png" width="60%" height="60%" style="display: block; margin: auto;" />
Was hier noch fehlt ist, die Umorientierung der Zahlen für die Männer “nach links”. Dazu multiplizieren wir <code>total_m</code> mit <code>-1</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb40-1"><a href="dataviz.html#cb40-1"></a><span class="kw">gen</span> neg_total_m = -total_m</span></code></pre></div>
<p>Damit dann verwenden wir <code>neg_total_m</code> für die Balken der Männer:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb41-1"><a href="dataviz.html#cb41-1"></a><span class="kw">twoway</span>( <span class="bn">bar</span> neg_total_m age, horizontal )(<span class="bn">bar</span> total_f age, horizontal)</span></code></pre></div>
<p><img src="04_pyramid002.png" width="60%" height="60%" style="display: block; margin: auto;" />
Mit <code>xlabel</code> und <code>legend</code>noch einige Anpassungen, außerdem können wir mit <code>text</code> noch Beschriftungen hinzufügen:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb42-1"><a href="dataviz.html#cb42-1"></a><span class="kw">twoway</span>( <span class="bn">bar</span> neg_total_m age, horizontal )(<span class="bn">bar</span> total_f age, horizontal) ,<span class="kw">xlabel</span>( -40 <span class="st">&quot;40&quot;</span> -30 <span class="st">&quot;30&quot;</span> -20 <span class="st">&quot;20&quot;</span> -10 <span class="st">&quot;10&quot;</span> 0 10(10)40 ) <span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">text</span>(100 -8 <span class="st">&quot;Männer&quot;</span>) <span class="bn">text</span>(100 8 <span class="st">&quot;Frauen&quot;</span>)</span></code></pre></div>
<p><img src="04_pyramid.png" width="60%" height="60%" style="display: block; margin: auto;" /></p>
<p>Anpassung der Farbe, des Schemas, …:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb43-1"><a href="dataviz.html#cb43-1"></a><span class="kw">twoway</span> <span class="co">///</span></span>
<span id="cb43-2"><a href="dataviz.html#cb43-2"></a>(<span class="bn">bar</span> neg_total_m age, horizontal fcolor(<span class="st">&quot;60 117 153&quot;</span>)) <span class="co">///</span></span>
<span id="cb43-3"><a href="dataviz.html#cb43-3"></a>(<span class="bn">bar</span> total_f age, horizontal fcolor(<span class="st">&quot;201 255 247&quot;</span>)) , <span class="co">/// </span></span>
<span id="cb43-4"><a href="dataviz.html#cb43-4"></a><span class="kw">xlabel</span>( -40 <span class="st">&quot;40&quot;</span> -30 <span class="st">&quot;30&quot;</span> -20 <span class="st">&quot;20&quot;</span> -10 <span class="st">&quot;10&quot;</span> 0 10(10)40 ) <span class="co">///</span></span>
<span id="cb43-5"><a href="dataviz.html#cb43-5"></a><span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">text</span>(100 -8 <span class="st">&quot;Männer&quot;</span>) <span class="bn">text</span>(100 8 <span class="st">&quot;Frauen&quot;</span>) <span class="co">///</span></span>
<span id="cb43-6"><a href="dataviz.html#cb43-6"></a><span class="bn">xscale</span>(<span class="kw">range</span>(0 50)) xtick(-50 (10) 50 ) <span class="co">///</span></span>
<span id="cb43-7"><a href="dataviz.html#cb43-7"></a><span class="dv">scheme</span>(plotplain) <span class="bn">xtitle</span>(<span class="st">&quot;{stSerif: Anzahl Befragte}&quot;</span>) <span class="bn">ytitle</span>(<span class="st">&quot;{stSerif: Alter Befragte(r)}&quot;</span>)</span></code></pre></div>
<p><img src="04_pyramid_final.png" width="60%" height="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="boxplot1" class="section level3">
<h3><span class="header-section-number">4.9.4</span> Boxplot</h3>
<p>Definition der Bestandteile eines Boxplots:</p>
<ul>
<li>ggf. Ausreißer</li>
<li>unterer Whisker: <code>q1 - 1.5* IQR</code></li>
<li>untere Grenze: 1. Quartil</li>
<li>mittlere Linie: Median</li>
<li>obere Grenze: 3. Quartil</li>
<li>oberer Whisker: <code>q3 + 1.5* IQR</code></li>
<li>ggf. Ausreißer</li>
</ul>
<p>Die Box enthält also die zentralen 50% des Wertebereichs.
<img src="Stata_Skript_files/figure-html/boxplot1-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<!-- ##  Gruppierte Darstellungen  -->
<!-- Neben `,by()` können wir in `graph box` auch  -->

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Daher die Angabe <code>(count)</code>.<a href="dataviz.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><code>over(educ)</code> legt dabei fest, dass innerhalb der Kategorien von <code>educ</code> gezählt werden soll.<a href="dataviz.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Das geht auch schneller mit <code>separate</code> - siehe Kapitel <a href="adva.html#adva">11</a>.6<a href="dataviz.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>für die y-Achse funktionert das genauso, lediglich mit <code>yticks</code> usw.<a href="dataviz.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>RGB steht dabei als Abkürzung für die Anteile der Grundfarben Rot, Grün und Blau an der Mischfarbe. Andere, zB hex Farbcodes können (<code>#0D173F</code>), diese können z.B <a href="https://www.color-hex.com/">hier</a> umgerechnet werden.<a href="dataviz.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>Eine Abkürzung für diesen Schritt mit Hilfe von <code>separate</code> findet sich in Kapitel <a href="adva.html#adva">11</a><a href="dataviz.html#fnref6" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="desc1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="zshg.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

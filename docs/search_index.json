[
["Stata2.html", "2 Arbeiten mit Datensätzen in Stata 2.1 Vorab: Befehlsstruktur 2.2 Auszählen &amp; Überblick erhalten 2.3 Neue Variablen erstellen 2.4 gen ist gut, Kontrolle ist besser 2.5 if Bedingungen 2.6 Bestehende Variablen verändern 2.7 keep &amp; drop 2.8 Nochmal von vorne: Daten neu laden 2.9 Speichern 2.10 Übungen 2.11 sortieren 2.12 egen", " 2 Arbeiten mit Datensätzen in Stata Nachdem wir uns in Stata etwas umgesehen haben, können wir uns jetzt cd .... use &quot;ZA5270_v2-0-0.dta&quot; 2.1 Vorab: Befehlsstruktur Ganz nebenbei haben wir im Kapitel 1 bereits die ersten Stata-Befehle verwendet. Bevor wir jetzt aber tiefer einsteigen nochmal einmal ganz allgemein: Die grundsätzliche Struktur von Stata-Kommandos ist immer befehl variable, optionen. Zunächst geben wir also immer an, was passieren soll - bisher war das eben zum Beispiel eine Beschreibung (describe) einer Variable: describe sex storage display value variable name type format label variable label ---------------------------------------------------------------------------------------------------- sex byte %12.0g sex GESCHLECHT, BEFRAGTE(R) Diese können wir mit der Option short abändern. Optionen werden nach einem , angegeben: describe sex, simple sex Befehle ohne Variable beziehen sich immer auf den gesamten Datensatz, bei describe bekommen wir damit dann eine Übersicht zum Datensatz: describe, short Contains data from D:\\oCloud\\Home-Cloud\\Lehre\\Methodenseminar\\ZA5270_v2-0-0.dta obs: 3,477 ALLBUS 2018 vars: 708 28 Mar 2019 16:09 size: 3,431,799 Sorted by: Mit help bekommen wir eine Hilfeseite angezeigt, hilfreich sind dabei vor allem die Beispiele ganz unten: help describe 2.2 Auszählen &amp; Überblick erhalten su age tab sex (ALLBUS 2018) Variable | Obs Mean Std. Dev. Min Max -------------+-------------------------------------------------------- age | 3477 51.5568 17.91249 -32 95 GESCHLECHT, | BEFRAGTE(R) | Freq. Percent Cum. ------------+----------------------------------- MANN | 1,773 50.99 50.99 FRAU | 1,704 49.01 100.00 ------------+----------------------------------- Total | 3,477 100.00 2.3 Neue Variablen erstellen gen age_mon = age * 12 su age_mon Variable | Obs Mean Std. Dev. Min Max -------------+-------------------------------------------------------- age_mon | 3477 618.6816 214.9499 -384 1140 2.4 gen ist gut, Kontrolle ist besser bro respid age age_mon 2.5 if Bedingungen &gt;, &lt;, ==, &gt;=, &lt;= browse sex land if age &lt;= 20 inrange, inlist 2.6 Bestehende Variablen verändern replace age = . if age &lt; 0 2.7 keep &amp; drop 2.8 Nochmal von vorne: Daten neu laden use &quot;ZA5270_v2-0-0.dta&quot; no; dataset in memory has changed since last saved Wir müssen erst den existierenden Datensatz mit clear löschen oder die clear Option für use verwenden: clear use &quot;ZA5270_v2-0-0.dta&quot; use &quot;ZA5270_v2-0-0.dta&quot;, clear 2.9 Speichern Natürlich können wir unsere Daten auch abspeichern, wenn alles wie gewünscht geklappt hat. Dafür gibt es den Befehl save, der analog zu use funktioniert. Wenn wir allerdings einfach wieder den Original-Datensatznamen angeben und in der Zwischenzeit Variablen erstellt oder gelöscht haben, dann bekommen wir folgende Fehlermeldung: cd ... save &quot;ZA5270_v2-0-0.dta&quot; file auto.dta already exists r(602); Wir geben also entweder einen anderen Dateinamen an: save &quot;ZA5270_v2-0-0_neu.dta&quot; Oder wir teilen Stata mit der Option replace explizit mit, dass die Datei überschrieben werden soll: save &quot;ZA5270_v2-0-0.dta&quot;, replace 2.10 Übungen Laden Sie den Datensatz Allbus2018 in Stata. Nutzen Sie d und browse, um sich einen Überblick über den Datensatz zu verschaffen. Wie viele Befagte (Zeilen) enthält der Datensatz? Lassen Sie sich die Variablennamen anzeigen! Die Variable sex gibt das Geschlecht der Befragten an. Welches Skalenniveau hat die Variable?1 Was verbirgt sich hinter der Variable gkpol? Sehen Sie im Codebuch nach! Welche Bedeutung hat die Ausprägung 2 für diese Variable? Welches Skalenniveau hat gkpol? Welche Information ist in der Variable respid abgelegt? Wie können Sie sich die Zeile anzeigen lassen, welche den/die Befragte*n mit der respid 3469 enthält? Wie alt ist der/die Befragte mit der respid 3469? Welches Geschlecht hat die Person? Erstellen Sie eine neue Variable mit dem Alter der Befragten im Jahr 2020! Wählen Sie alle Befragten aus, die nach 1960 geboren wurden und löschen Sie alle anderen aus dem Datensatz. Wie viele Spalten hat nach_1960? Wie viele Zeilen? Nutzen Sie für Ihre Antwort die Befehle die wir kennen gelernt haben. 2.11 sortieren 2.12 egen bys agec: egen mean_inc = mean(inc) bys agec: keep if _n == 1 list agec mean_inc +-------------------------+ | agec mean_inc | |-------------------------| 1. | 18-29 JAHRE 1026.236 | 2. | 30-44 JAHRE 1729.861 | 3. | 45-59 JAHRE 1915.664 | 4. | 60-74 JAHRE 1567.953 | 5. | 75-89 JAHRE 1454.949 | |-------------------------| 6. | UEBER 89 JAH 1942.133 | +-------------------------+ Diese Frage ist eine inhaltliche, Stata hilft Ihnen hier nicht weiter.↩︎ "]
]

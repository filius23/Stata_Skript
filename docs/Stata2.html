<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Arbeiten mit Datensätzen in Stata | GESIS Methodenseminar 2020</title>
  <meta name="description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Arbeiten mit Datensätzen in Stata | GESIS Methodenseminar 2020" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Arbeiten mit Datensätzen in Stata | GESIS Methodenseminar 2020" />
  
  <meta name="twitter:description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  

<meta name="author" content="Andreas Filser" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Stata1.html"/>
<link rel="next" href="desc1.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Gesis Methodenseminar</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Herzlich Willkommen!</a></li>
<li class="chapter" data-level="1" data-path="Stata1.html"><a href="Stata1.html"><i class="fa fa-check"></i><b>1</b> Einstieg in Stata</a><ul>
<li class="chapter" data-level="1.1" data-path="Stata1.html"><a href="Stata1.html#taschenrechner"><i class="fa fa-check"></i><b>1.1</b> Taschenrechner</a></li>
<li class="chapter" data-level="1.2" data-path="Stata1.html"><a href="Stata1.html#darstellung-in-diesem-skript"><i class="fa fa-check"></i><b>1.2</b> Darstellung in diesem Skript</a></li>
<li class="chapter" data-level="1.3" data-path="Stata1.html"><a href="Stata1.html#dofile-editor"><i class="fa fa-check"></i><b>1.3</b> DoFile Editor</a></li>
<li class="chapter" data-level="1.4" data-path="Stata1.html"><a href="Stata1.html#datensätze-laden"><i class="fa fa-check"></i><b>1.4</b> Datensätze laden</a></li>
<li class="chapter" data-level="1.5" data-path="Stata1.html"><a href="Stata1.html#daten-codebücher-fragebogen"><i class="fa fa-check"></i><b>1.5</b> Daten, Codebücher, Fragebogen</a></li>
<li class="chapter" data-level="1.6" data-path="Stata1.html"><a href="Stata1.html#überblicksbefehle"><i class="fa fa-check"></i><b>1.6</b> Überblicksbefehle</a><ul>
<li class="chapter" data-level="1.6.1" data-path="Stata1.html"><a href="Stata1.html#describe"><i class="fa fa-check"></i><b>1.6.1</b> <code>describe</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="Stata1.html"><a href="Stata1.html#browse"><i class="fa fa-check"></i><b>1.6.2</b> <code>browse</code></a></li>
<li class="chapter" data-level="1.6.3" data-path="Stata1.html"><a href="Stata1.html#list"><i class="fa fa-check"></i><b>1.6.3</b> <code>list</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="Stata1.html"><a href="Stata1.html#lookfor"><i class="fa fa-check"></i><b>1.6.4</b> <code>lookfor</code></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="Stata1.html"><a href="Stata1.html#if-bedingung---nur-manche-zeilen-ansehen"><i class="fa fa-check"></i><b>1.7</b> if Bedingung - nur manche Zeilen ansehen</a></li>
<li class="chapter" data-level="1.8" data-path="Stata1.html"><a href="Stata1.html#U1"><i class="fa fa-check"></i><b>1.8</b> Übungen</a></li>
<li class="chapter" data-level="1.9" data-path="Stata1.html"><a href="Stata1.html#profi-übungen"><i class="fa fa-check"></i><b>1.9</b> Profi-Übungen</a></li>
<li class="chapter" data-level="1.10" data-path="Stata1.html"><a href="Stata1.html#weitere-anmerkungen"><i class="fa fa-check"></i><b>1.10</b> Weitere Anmerkungen</a><ul>
<li class="chapter" data-level="1.10.1" data-path="Stata1.html"><a href="Stata1.html#var_types"><i class="fa fa-check"></i><b>1.10.1</b> Variablentypen</a></li>
<li class="chapter" data-level="1.10.2" data-path="Stata1.html"><a href="Stata1.html#otherfmts"><i class="fa fa-check"></i><b>1.10.2</b> import anderer Dateiformate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Stata2.html"><a href="Stata2.html"><i class="fa fa-check"></i><b>2</b> Arbeiten mit Datensätzen in Stata</a><ul>
<li class="chapter" data-level="2.1" data-path="Stata2.html"><a href="Stata2.html#vorab-befehlsstruktur-hilfe"><i class="fa fa-check"></i><b>2.1</b> Vorab: Befehlsstruktur &amp; Hilfe</a></li>
<li class="chapter" data-level="2.2" data-path="Stata2.html"><a href="Stata2.html#auszählen-überblick-erhalten"><i class="fa fa-check"></i><b>2.2</b> Auszählen &amp; Überblick erhalten</a></li>
<li class="chapter" data-level="2.3" data-path="Stata2.html"><a href="Stata2.html#neue-variablen-erstellen"><i class="fa fa-check"></i><b>2.3</b> Neue Variablen erstellen</a></li>
<li class="chapter" data-level="2.4" data-path="Stata2.html"><a href="Stata2.html#bestehende-variablen-verändern"><i class="fa fa-check"></i><b>2.4</b> Bestehende Variablen verändern</a></li>
<li class="chapter" data-level="2.5" data-path="Stata2.html"><a href="Stata2.html#gen-ist-gut-kontrolle-ist-besser"><i class="fa fa-check"></i><b>2.5</b> gen ist gut, Kontrolle ist besser</a></li>
<li class="chapter" data-level="2.6" data-path="Stata2.html"><a href="Stata2.html#fehlende-werte"><i class="fa fa-check"></i><b>2.6</b> Fehlende Werte</a></li>
<li class="chapter" data-level="2.7" data-path="Stata2.html"><a href="Stata2.html#if-bedingungen-und-fehlende-werte"><i class="fa fa-check"></i><b>2.7</b> if Bedingungen und fehlende Werte</a></li>
<li class="chapter" data-level="2.8" data-path="Stata2.html"><a href="Stata2.html#keep-drop"><i class="fa fa-check"></i><b>2.8</b> keep &amp; drop</a></li>
<li class="chapter" data-level="2.9" data-path="Stata2.html"><a href="Stata2.html#labels-und-if-bedingungen"><i class="fa fa-check"></i><b>2.9</b> Labels und if-Bedingungen</a></li>
<li class="chapter" data-level="2.10" data-path="Stata2.html"><a href="Stata2.html#nochmal-von-vorne-daten-neu-laden"><i class="fa fa-check"></i><b>2.10</b> Nochmal von vorne: Daten neu laden</a></li>
<li class="chapter" data-level="2.11" data-path="Stata2.html"><a href="Stata2.html#speichern"><i class="fa fa-check"></i><b>2.11</b> Speichern</a></li>
<li class="chapter" data-level="2.12" data-path="Stata2.html"><a href="Stata2.html#übungen"><i class="fa fa-check"></i><b>2.12</b> Übungen</a></li>
<li class="chapter" data-level="2.13" data-path="Stata1.html"><a href="Stata1.html#profi-übungen"><i class="fa fa-check"></i><b>2.13</b> Profi-Übungen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="desc1.html"><a href="desc1.html"><i class="fa fa-check"></i><b>3</b> Deskriptive Statistik</a><ul>
<li class="chapter" data-level="3.1" data-path="desc1.html"><a href="desc1.html#kategoriale-merkmale"><i class="fa fa-check"></i><b>3.1</b> Kategoriale Merkmale</a><ul>
<li class="chapter" data-level="3.1.1" data-path="desc1.html"><a href="desc1.html#absolute-häufigkeiten"><i class="fa fa-check"></i><b>3.1.1</b> Absolute Häufigkeiten</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="desc1.html"><a href="desc1.html#metrische-variablen"><i class="fa fa-check"></i><b>3.2</b> Metrische Variablen</a></li>
<li class="chapter" data-level="3.3" data-path="desc1.html"><a href="desc1.html#exkurs-labels-vergeben"><i class="fa fa-check"></i><b>3.3</b> Exkurs: labels vergeben</a></li>
<li class="chapter" data-level="3.4" data-path="desc1.html"><a href="desc1.html#kontingenztabellen"><i class="fa fa-check"></i><b>3.4</b> Kontingenztabellen</a></li>
<li class="chapter" data-level="3.5" data-path="desc1.html"><a href="desc1.html#relative-häufigkeiten"><i class="fa fa-check"></i><b>3.5</b> Relative Häufigkeiten</a></li>
<li class="chapter" data-level="3.6" data-path="desc1.html"><a href="desc1.html#zeilenprozente"><i class="fa fa-check"></i><b>3.6</b> Zeilenprozente</a></li>
<li class="chapter" data-level="3.7" data-path="desc1.html"><a href="desc1.html#spaltenprozente"><i class="fa fa-check"></i><b>3.7</b> Spaltenprozente</a></li>
<li class="chapter" data-level="3.8" data-path="Stata2.html"><a href="Stata2.html#übungen"><i class="fa fa-check"></i><b>3.8</b> Übungen</a></li>
<li class="chapter" data-level="3.9" data-path="Stata1.html"><a href="Stata1.html#profi-übungen"><i class="fa fa-check"></i><b>3.9</b> Profi-Übungen</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="desc2.html"><a href="desc2.html"><i class="fa fa-check"></i><b>4</b> Mehr deskriptive Statistik</a><ul>
<li class="chapter" data-level="4.1" data-path="desc2.html"><a href="desc2.html#tabstat"><i class="fa fa-check"></i><b>4.1</b> <code>tabstat</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>5</b> Datenvisualisierung in Stata</a><ul>
<li class="chapter" data-level="5.1" data-path="dataviz.html"><a href="dataviz.html#grafik-syntax-in-stata"><i class="fa fa-check"></i><b>5.1</b> Grafik-Syntax in Stata</a><ul>
<li class="chapter" data-level="5.1.1" data-path="dataviz.html"><a href="dataviz.html#aufbau"><i class="fa fa-check"></i><b>5.1.1</b> Aufbau</a></li>
<li class="chapter" data-level="5.1.2" data-path="dataviz.html"><a href="dataviz.html#twoway"><i class="fa fa-check"></i><b>5.1.2</b> twoway</a></li>
<li class="chapter" data-level="5.1.3" data-path="dataviz.html"><a href="dataviz.html#kombinieren-von-zwei-twoway-grafiken"><i class="fa fa-check"></i><b>5.1.3</b> Kombinieren von zwei twoway-Grafiken</a></li>
<li class="chapter" data-level="5.1.4" data-path="dataviz.html"><a href="dataviz.html#vorlagen"><i class="fa fa-check"></i><b>5.1.4</b> Vorlagen</a></li>
<li class="chapter" data-level="5.1.5" data-path="dataviz.html"><a href="dataviz.html#optionen"><i class="fa fa-check"></i><b>5.1.5</b> Optionen</a></li>
<li class="chapter" data-level="5.1.6" data-path="dataviz.html"><a href="dataviz.html#farben"><i class="fa fa-check"></i><b>5.1.6</b> Farben</a></li>
<li class="chapter" data-level="5.1.7" data-path="dataviz.html"><a href="dataviz.html#subgruppen"><i class="fa fa-check"></i><b>5.1.7</b> Subgruppen</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="dataviz.html"><a href="dataviz.html#abschließende-beispiele"><i class="fa fa-check"></i><b>5.2</b> Abschließende Beispiele</a></li>
<li class="chapter" data-level="5.3" data-path="dataviz.html"><a href="dataviz.html#bevölkerungspyramide"><i class="fa fa-check"></i><b>5.3</b> Bevölkerungspyramide</a></li>
<li class="chapter" data-level="5.4" data-path="dataviz.html"><a href="dataviz.html#abschließende-bemerkungen"><i class="fa fa-check"></i><b>5.4</b> Abschließende Bemerkungen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lin-reg.html"><a href="lin-reg.html"><i class="fa fa-check"></i><b>6</b> Regression</a><ul>
<li class="chapter" data-level="6.1" data-path="lin-reg.html"><a href="lin-reg.html#beispieldatensatz"><i class="fa fa-check"></i><b>6.1</b> Beispieldatensatz</a></li>
<li class="chapter" data-level="6.2" data-path="lin-reg.html"><a href="lin-reg.html#idee-einer-regression"><i class="fa fa-check"></i><b>6.2</b> Idee einer Regression</a></li>
<li class="chapter" data-level="6.3" data-path="lin-reg.html"><a href="lin-reg.html#residuen"><i class="fa fa-check"></i><b>6.3</b> Residuen</a><ul>
<li class="chapter" data-level="6.3.1" data-path="lin-reg.html"><a href="lin-reg.html#quadrierte-residuen"><i class="fa fa-check"></i><b>6.3.1</b> Quadrierte Residuen</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="lin-reg.html"><a href="lin-reg.html#interpretation-der-regression"><i class="fa fa-check"></i><b>6.4</b> Interpretation der Regression</a><ul>
<li class="chapter" data-level="6.4.1" data-path="lin-reg.html"><a href="lin-reg.html#vorhergesagte-werte"><i class="fa fa-check"></i><b>6.4.1</b> Vorhergesagte Werte</a></li>
<li class="chapter" data-level="6.4.2" data-path="lin-reg.html"><a href="lin-reg.html#residuen-1"><i class="fa fa-check"></i><b>6.4.2</b> Residuen</a></li>
<li class="chapter" data-level="6.4.3" data-path="lin-reg.html"><a href="lin-reg.html#modellgüte"><i class="fa fa-check"></i><b>6.4.3</b> Modellgüte</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="Stata2.html"><a href="Stata2.html#übungen"><i class="fa fa-check"></i><b>6.5</b> Übungen</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="inf1.html"><a href="inf1.html"><i class="fa fa-check"></i><b>7</b> Inferenzstatistik I</a></li>
<li class="chapter" data-level="8" data-path="inf2.html"><a href="inf2.html"><i class="fa fa-check"></i><b>8</b> Inferenzstatistik II</a></li>
<li class="chapter" data-level="9" data-path="hypo.html"><a href="hypo.html"><i class="fa fa-check"></i><b>9</b> Hypothesentests</a></li>
<li class="chapter" data-level="10" data-path="export1.html"><a href="export1.html"><i class="fa fa-check"></i><b>10</b> Ergebnisexport &amp; weitere Tipps</a></li>
<li class="chapter" data-level="11" data-path="adva.html"><a href="adva.html"><i class="fa fa-check"></i><b>11</b> Fortgeschrittene Themen</a><ul>
<li class="chapter" data-level="11.0.1" data-path="adva.html"><a href="adva.html#wertelabels"><i class="fa fa-check"></i><b>11.0.1</b> Wertelabels</a></li>
<li class="chapter" data-level="11.0.2" data-path="adva.html"><a href="adva.html#sortieren"><i class="fa fa-check"></i><b>11.0.2</b> sortieren</a></li>
<li class="chapter" data-level="11.0.3" data-path="adva.html"><a href="adva.html#indikatoren-umdrehen"><i class="fa fa-check"></i><b>11.0.3</b> Indikatoren umdrehen</a></li>
<li class="chapter" data-level="11.0.4" data-path="adva.html"><a href="adva.html#informationen-aus-mehreren-variablen"><i class="fa fa-check"></i><b>11.0.4</b> Informationen aus mehreren Variablen</a></li>
<li class="chapter" data-level="11.0.5" data-path="adva.html"><a href="adva.html#informationen-aus-mehreren-datensätzen"><i class="fa fa-check"></i><b>11.0.5</b> Informationen aus mehreren Datensätzen</a></li>
<li class="chapter" data-level="11.0.6" data-path="adva.html"><a href="adva.html#arbeiten-mit-textvariablen"><i class="fa fa-check"></i><b>11.0.6</b> Arbeiten mit Textvariablen</a></li>
<li class="chapter" data-level="11.0.7" data-path="adva.html"><a href="adva.html#egen"><i class="fa fa-check"></i><b>11.0.7</b> egen</a></li>
<li class="chapter" data-level="11.0.8" data-path="adva.html"><a href="adva.html#gruppierte-berechnungen"><i class="fa fa-check"></i><b>11.0.8</b> gruppierte Berechnungen</a></li>
<li class="chapter" data-level="11.0.9" data-path="adva.html"><a href="adva.html#collapse"><i class="fa fa-check"></i><b>11.0.9</b> collapse</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GESIS Methodenseminar 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Stata2" class="section level1">
<h1><span class="header-section-number">2</span> Arbeiten mit Datensätzen in Stata</h1>
<p>Nachdem wir uns in Stata etwas umgesehen haben, können wir uns jetzt dem eigentlichen Arbeiten mit Datensätzen zuwenden.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb1-1"><a href="Stata2.html#cb1-1"></a>cd ....</span>
<span id="cb1-2"><a href="Stata2.html#cb1-2"></a><span class="kw">use</span> <span class="st">&quot;Allbus2018.dta&quot;</span></span></code></pre></div>
<div id="vorab-befehlsstruktur-hilfe" class="section level2">
<h2><span class="header-section-number">2.1</span> Vorab: Befehlsstruktur &amp; Hilfe</h2>
<p>Ganz nebenbei haben wir in Kapitel 1 bereits die ersten Stata-Befehle verwendet. Bevor wir jetzt aber tiefer einsteigen nochmal einmal allgemein:</p>
<p>Die grundsätzliche Struktur von Stata-Kommandos ist immer <code>befehl variable, optionen</code>. Zunächst geben wir also immer an, was passieren soll - bisher war das eben zum Beispiel eine Beschreibung (<code>describe</code>) einer Variable:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb2-1"><a href="Stata2.html#cb2-1"></a><span class="kw">describe</span> sex</span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
----------------------------------------------------------------------------------------------------
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
<p>Diese können wir mit der Option <code>simple</code> abändern. Optionen werden nach einem <code>,</code> angegeben:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb4-1"><a href="Stata2.html#cb4-1"></a><span class="kw">describe</span> sex, simple</span></code></pre></div>
<pre><code>sex</code></pre>
<p>Befehle ohne Variable beziehen sich immer auf den gesamten Datensatz, bei <code>describe</code> bekommen wir damit dann eine Übersicht zum Datensatz:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb6-1"><a href="Stata2.html#cb6-1"></a><span class="kw">describe</span>, <span class="kw">short</span></span></code></pre></div>
<pre><code>Contains data from D:\oCloud\Home-Cloud\Lehre\Methodenseminar\Allbus2018.dta
  obs:         3,477                          ALLBUS 2018
 vars:           708                          28 Mar 2019 16:09
 size:     3,431,799                          
Sorted by:  </code></pre>
<p>Mit <code>help</code> bekommen wir eine Hilfeseite angezeigt, hilfreich sind dabei vor allem die Beispiele ganz unten:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb8-1"><a href="Stata2.html#cb8-1"></a><span class="kw">help</span> <span class="kw">describe</span></span></code></pre></div>
<p><img src="02_help_describe.PNG" width="40%" style="display: block; margin: auto;" /></p>
<p>Kommandos in Stata sind zeilenbasiert. D.h. alles was zu einem Kommando gehört, muss in der gleichen Zeile stehen. Umgekehrt wird auch alles, was in einer Zeile steht als Teil des Kommandos verstanden:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb9-1"><a href="Stata2.html#cb9-1"></a><span class="kw">describe</span> pv01 age sex, <span class="kw">short</span></span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
<p>Funktioniert nicht:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb11-1"><a href="Stata2.html#cb11-1"></a><span class="kw">d</span> pv01 age </span>
<span id="cb11-2"><a href="Stata2.html#cb11-2"></a>sex</span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)

unrecognized command:  sex
r(199);

end of do-file
r(199);</code></pre>
<p>Mit <code>///</code> können wir Zeilen verknüpfen:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb13-1"><a href="Stata2.html#cb13-1"></a><span class="kw">d</span> pv01 age <span class="co">///</span></span>
<span id="cb13-2"><a href="Stata2.html#cb13-2"></a>sex</span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
<p>Außerdem können wir mit <code>//</code> Kommentare in unsere DoFiles einfügen. <code>//</code> blendet alles folgende am Ende der Zeile aus:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb15-1"><a href="Stata2.html#cb15-1"></a><span class="kw">d</span> pv01 age sex <span class="co">// dies ist ein kommentar</span></span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
</div>
<div id="auszählen-überblick-erhalten" class="section level2">
<h2><span class="header-section-number">2.2</span> Auszählen &amp; Überblick erhalten</h2>
<p>Mit <code>tabulate</code> bekommen wir eine Auszählung der Ausprägungen einer Variable. Dies ist wohl der wichtigste Befehl in Stata:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb17-1"><a href="Stata2.html#cb17-1"></a><span class="kw">tabulate</span> sex</span></code></pre></div>
<pre><code>GESCHLECHT, |
BEFRAGTE(R) |      Freq.     Percent        Cum.
------------+-----------------------------------
       MANN |      1,773       50.99       50.99
       FRAU |      1,704       49.01      100.00
------------+-----------------------------------
      Total |      3,477      100.00</code></pre>
<p>Wir sehen hier also, dass <code>sex</code> zwei Ausprägungen hat und 1773 Männer und 1704 Frauen enthält.</p>
<p>Für metrisch skalierte Variablen mit deutlich mehr Ausprägungen können wir <code>tabulate</code> zwar theoretisch auch verwenden, allerdings wird eine Tabelle hier sehr schnell sehr unübersichtlich:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb19-1"><a href="Stata2.html#cb19-1"></a><span class="kw">tabulate</span> age</span></code></pre></div>
<pre><code>           ALTER: |
      BEFRAGTE(R) |      Freq.     Percent        Cum.
------------------+-----------------------------------
NICHT GENERIERBAR |          5        0.14        0.14
               18 |         26        0.75        0.89
               19 |         37        1.06        1.96
               20 |         34        0.98        2.93
               21 |         34        0.98        3.91
               22 |         33        0.95        4.86
               23 |         33        0.95        5.81
               24 |         31        0.89        6.70
               25 |         46        1.32        8.02
               26 |         43        1.24        9.26
               27 |         51        1.47       10.73
               28 |         52        1.50       12.22
               29 |         55        1.58       13.81
               30 |         39        1.12       14.93
               31 |         54        1.55       16.48
               32 |         50        1.44       17.92
               33 |         49        1.41       19.33
               34 |         51        1.47       20.79
               35 |         64        1.84       22.63
               36 |         58        1.67       24.30
               37 |         54        1.55       25.86
               38 |         51        1.47       27.32
               39 |         41        1.18       28.50
               40 |         51        1.47       29.97
               41 |         41        1.18       31.15
               42 |         43        1.24       32.38
               43 |         52        1.50       33.88
               44 |         56        1.61       35.49
               45 |         52        1.50       36.99
               46 |         48        1.38       38.37
               47 |         50        1.44       39.80
               48 |         74        2.13       41.93
               49 |         65        1.87       43.80
               50 |         65        1.87       45.67
               51 |         79        2.27       47.94
               52 |         72        2.07       50.01
               53 |         69        1.98       52.00
               54 |         78        2.24       54.24
               55 |         84        2.42       56.66
               56 |         74        2.13       58.79
               57 |         68        1.96       60.74
               58 |         76        2.19       62.93
               59 |         62        1.78       64.71
               60 |         74        2.13       66.84
               61 |         62        1.78       68.62
               62 |         60        1.73       70.35
               63 |         53        1.52       71.87
               64 |         60        1.73       73.60
               65 |         62        1.78       75.38
               66 |         66        1.90       77.28
               67 |         78        2.24       79.52
               68 |         70        2.01       81.54
               69 |         56        1.61       83.15
               70 |         46        1.32       84.47
               71 |         39        1.12       85.59
               72 |         26        0.75       86.34
               73 |         47        1.35       87.69
               74 |         38        1.09       88.78
               75 |         39        1.12       89.91
               76 |         42        1.21       91.11
               77 |         40        1.15       92.26
               78 |         43        1.24       93.50
               79 |         33        0.95       94.45
               80 |         39        1.12       95.57
               81 |         22        0.63       96.20
               82 |         27        0.78       96.98
               83 |         18        0.52       97.50
               84 |         17        0.49       97.99
               85 |         16        0.46       98.45
               86 |          5        0.14       98.59
               87 |         11        0.32       98.91
               88 |         14        0.40       99.31
               89 |          9        0.26       99.57
               90 |          4        0.12       99.68
               91 |          1        0.03       99.71
               92 |          7        0.20       99.91
               94 |          2        0.06       99.97
               95 |          1        0.03      100.00
------------------+-----------------------------------
            Total |      3,477      100.00</code></pre>
<p>Für metrische Variablen empfiehlt sich daher <code>summarize</code> als Überblicksbefehl:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb21-1"><a href="Stata2.html#cb21-1"></a><span class="kw">summarize</span> age</span></code></pre></div>
<p>Hier bekommen wir die Anzahl der Beobachtungen (<code>Obs.</code>), das arithmetische Mittel (<code>Mean</code>), sowie die Minimal- und Maximalwerte ausgegeben (<code>Min</code>&amp;<code>Max</code>). (zur Standardabweichung <code>Std. Dev.</code> kommen wir noch).</p>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      3477     51.5568    17.91249        -32         95</code></pre>
<p><code>summarize</code> klappt auch mit mehreren Variablen auf einmal:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb23-1"><a href="Stata2.html#cb23-1"></a><span class="kw">summarize</span> age inc <span class="co">// klappt auch mit mehreren Variablen</span></span></code></pre></div>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      3477     51.5568    17.91249        -32         95
         inc |      3477    1620.798    1374.651        -50      18000</code></pre>
</div>
<div id="neue-variablen-erstellen" class="section level2">
<h2><span class="header-section-number">2.3</span> Neue Variablen erstellen</h2>
<p>Natürlich sind wir nicht nur darauf beschränkt, bestehende Variablen anzusehen, sondern wir können auch neue Variablen erstellen. Das geht mit <code>gen</code>. Dazu geben wir erst den neuen Variablennamen an und nach <code>=</code>, wie die neue Variable bestimmt werden soll:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb25-1"><a href="Stata2.html#cb25-1"></a><span class="kw">gen</span> age_mon = age * 12</span>
<span id="cb25-2"><a href="Stata2.html#cb25-2"></a>su age_mon</span></code></pre></div>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     age_mon |      3477    618.6816    214.9499       -384       1140</code></pre>
<p>Wenn wir eine Variable überschreiben möchten, dann müssen wir diese erst mit <code>drop</code> löschen, bevor wir sie überschreiben. Würden wir den <code>gen</code> Befehl von gerade nochmal verwenden, dann bekommen wir eine Fehlermeldung:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb27-1"><a href="Stata2.html#cb27-1"></a><span class="kw">gen</span> age_mon = age * 12</span></code></pre></div>
<pre><code>age_mon already defined
r(110);

end of do-file
r(110);</code></pre>
<p>Wir müssen den Namen <code>age_mon</code> also erst wieder frei machen, dann funktioniert der Befehl auch:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb29-1"><a href="Stata2.html#cb29-1"></a><span class="kw">drop</span> age_mon</span>
<span id="cb29-2"><a href="Stata2.html#cb29-2"></a><span class="kw">gen</span> age_mon = age * 12</span></code></pre></div>
</div>
<div id="bestehende-variablen-verändern" class="section level2">
<h2><span class="header-section-number">2.4</span> Bestehende Variablen verändern</h2>
<p>Alternativ können wir auch mit <code>replace</code> explizit eine bestehende Variable überschreiben:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb30-1"><a href="Stata2.html#cb30-1"></a><span class="kw">replace</span> age_mon = age * 12</span></code></pre></div>
<p>Hier können wir aber nur bestehende Variablen ansprechen, sonst bekommen wir auch hier eine Fehlermeldung:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb31-1"><a href="Stata2.html#cb31-1"></a><span class="kw">replace</span> age_mon12 = age * 12</span></code></pre></div>
<pre><code>variable age_mon12 not found
r(111);

end of do-file
r(111);</code></pre>
</div>
<div id="gen-ist-gut-kontrolle-ist-besser" class="section level2">
<h2><span class="header-section-number">2.5</span> gen ist gut, Kontrolle ist besser</h2>
<p>Wie gerade gesehen gibt uns Stata aber keinerlei Erfolgsmeldungen. Nach der Bearbeitung oder Neuurstellung von Variablen sollte ein Blick in die Daten folgen. Dazu empfiehlt es sich, wieder auf den <code>browse</code> Befehl zurückzugreifen:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb33-1"><a href="Stata2.html#cb33-1"></a>browse respid age age_mon</span></code></pre></div>
<p><img src="02_stata_browse_kontrolle.png" width="40%" style="display: block; margin: auto;" /></p>
</div>
<div id="fehlende-werte" class="section level2">
<h2><span class="header-section-number">2.6</span> Fehlende Werte</h2>
<p>Wenn wir uns nochmal die Variable <code>age</code> ansehen, dann fallen die negativen Altersangaben ins Auge:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb34-1"><a href="Stata2.html#cb34-1"></a><span class="kw">summarize</span> age</span></code></pre></div>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      3477     51.5568    17.91249        -32         95</code></pre>
<p>Ein Blick ins Codebuch zeigt, dass es sich hier natürlich nicht um Befragte mit einem negativen Alter handelt. Sondern aufgrund der fehlenden Angaben zum Geburtsdatum lässt sich für manche Befragte das Alter nicht generieren. Für diese Fälle wurde dann -32 als Wert in <code>age</code> abgelegt:
<img src="02_age_codebuch.PNG" width="60%" style="display: block; margin: auto;" /></p>
<p>Diese Information müssen wir Stata mitteilen, indem wir -32 als <em>missing value</em> überschreiben. Diese <em>missing value</em>s werden in Stata mit <code>.</code> abgelegt und werden dann für die Berechnung von Mittelwerten usw. ausgeschlossen. Um also -32 als <code>.</code> zu überschreiben, können wir zB auf den <code>recode</code> Befehl zurückgreifen:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb36-1"><a href="Stata2.html#cb36-1"></a><span class="kw">summarize</span> age</span>
<span id="cb36-2"><a href="Stata2.html#cb36-2"></a><span class="kw">replace</span> age = . <span class="kw">if</span> age == 32</span>
<span id="cb36-3"><a href="Stata2.html#cb36-3"></a><span class="kw">summarize</span> age</span></code></pre></div>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      3477     51.5568    17.91249        -32         95

(50 real changes made, 50 to missing)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      3427    51.84214     17.8851        -32         95</code></pre>
<p>Wir bekommen von Stata mitgeteilt, dass wir 5 Beobachtungen verändert und auf missing gesetzt haben. Im folgenden <code>summarize</code> werden diese fehlden Werte dann ignoriert.</p>
<p>Ein Spezialbefehl für die Überschreibung von bestimmten Werten ist <code>mvdecode</code>. Mit <code>mvdecode</code> können wir <code>-32</code> in mehreren Variablen gleichzeitig überschreiben. Zum Beispiel in <code>dm03</code>, <code>dg03</code> und <code>isced97</code>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb38-1"><a href="Stata2.html#cb38-1"></a><span class="kw">mvdecode</span> dm03 dg03 isced97, mv(-32)</span></code></pre></div>
<pre><code>        dm03: 1 missing value generated
        dg03: 344 missing values generated
     isced97: 23 missing values generated</code></pre>
<p>Mit <code>mdesc</code> bekommen wir eine Auszählung zu fehlenden Werten. <code>mdesc</code> ist allerdings kein Standard-Stata-Befehl, sondern muss extra installiert werden. Das ist allerdings kein größerer Aufwand:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb40-1"><a href="Stata2.html#cb40-1"></a><span class="kw">ssc</span> install mdesc</span></code></pre></div>
<p>Anschließend können wir mit <code>mdesc</code> die Zahl der missings in <code>age</code>, <code>dm03</code>, <code>dg03</code> und <code>isced97</code> ausgeben lassen:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb41-1"><a href="Stata2.html#cb41-1"></a>mdesc age dm03 dg03 isced97</span></code></pre></div>
<pre><code>    Variable    |     Missing          Total     Percent Missing
----------------+-----------------------------------------------
            age |           0          3,477           0.00
           dm03 |           1          3,477           0.03
           dg03 |         344          3,477           9.89
        isced97 |          23          3,477           0.66
----------------+-----------------------------------------------</code></pre>
</div>
<div id="if-bedingungen-und-fehlende-werte" class="section level2">
<h2><span class="header-section-number">2.7</span> if Bedingungen und fehlende Werte</h2>
<p>Eine häufige Fehlerquelle bei fehlende Werten in Stata ist deren Verhältnis zu <code>&gt;</code>. Fehlende Werte werden nämlich von Stata als “unendlich groß” gewertet! Wenn wir uns Befragte mit einem Alter über 92 ausgeben lassen, dann bekommen wir auch diejenigen ohne Altersangabe ausgegegeben:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb43-1"><a href="Stata2.html#cb43-1"></a><span class="ot">list</span> sex land age <span class="kw">if</span> age &gt; 92</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="Stata2.html#cb44-1"></a>      <span class="op">+---------------------------+</span></span>
<span id="cb44-2"><a href="Stata2.html#cb44-2"></a><span class="st">      </span><span class="er">|</span><span class="st">  </span>sex           land   age <span class="op">|</span></span>
<span id="cb44-3"><a href="Stata2.html#cb44-3"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb44-4"><a href="Stata2.html#cb44-4"></a><span class="st"> </span><span class="fl">126.</span> <span class="op">|</span><span class="st"> </span>MANN        SACHSEN    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb44-5"><a href="Stata2.html#cb44-5"></a><span class="st"> </span><span class="fl">322.</span> <span class="op">|</span><span class="st"> </span>FRAU   RHEINLAND<span class="op">-</span>PF     . <span class="op">|</span></span>
<span id="cb44-6"><a href="Stata2.html#cb44-6"></a><span class="st"> </span><span class="fl">353.</span> <span class="op">|</span><span class="st"> </span>MANN   NORDRHEIN<span class="op">-</span>WE    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb44-7"><a href="Stata2.html#cb44-7"></a><span class="st"> </span><span class="fl">556.</span> <span class="op">|</span><span class="st"> </span>FRAU   NORDRHEIN<span class="op">-</span>WE     . <span class="op">|</span></span>
<span id="cb44-8"><a href="Stata2.html#cb44-8"></a><span class="fl">1342.</span> <span class="op">|</span><span class="st"> </span>FRAU   NORDRHEIN<span class="op">-</span>WE     . <span class="op">|</span></span>
<span id="cb44-9"><a href="Stata2.html#cb44-9"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb44-10"><a href="Stata2.html#cb44-10"></a><span class="fl">2135.</span> <span class="op">|</span><span class="st"> </span>FRAU    BRANDENBURG     . <span class="op">|</span></span>
<span id="cb44-11"><a href="Stata2.html#cb44-11"></a><span class="fl">3130.</span> <span class="op">|</span><span class="st"> </span>MANN         HESSEN     . <span class="op">|</span></span>
<span id="cb44-12"><a href="Stata2.html#cb44-12"></a><span class="fl">3299.</span> <span class="op">|</span><span class="st"> </span>MANN   RHEINLAND<span class="op">-</span>PF    <span class="dv">95</span> <span class="op">|</span></span>
<span id="cb44-13"><a href="Stata2.html#cb44-13"></a><span class="st">      </span><span class="op">+---------------------------+</span></span></code></pre></div>
<p>Es gibt zwei Möglichkeiten, dies zu umgehen:</p>
<ul>
<li>entweder wir verwenden <code>inrange</code> - wobei wir hier eine Obergrenze angeben müssen und außerdem die Untergrenze immer mit eingeschlossen wird. Wenn wir also nur Fälle sehen wollen, die <em>älter</em> als 92 sind, dann müssen wir einen Wert über 92 angeben:</li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb45-1"><a href="Stata2.html#cb45-1"></a><span class="ot">list</span> sex land age <span class="kw">if</span> <span class="fu">inrange</span>(age,92.1,100)</span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="Stata2.html#cb46-1"></a>      <span class="op">+---------------------------+</span></span>
<span id="cb46-2"><a href="Stata2.html#cb46-2"></a><span class="st">      </span><span class="er">|</span><span class="st">  </span>sex           land   age <span class="op">|</span></span>
<span id="cb46-3"><a href="Stata2.html#cb46-3"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb46-4"><a href="Stata2.html#cb46-4"></a><span class="st"> </span><span class="fl">126.</span> <span class="op">|</span><span class="st"> </span>MANN        SACHSEN    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb46-5"><a href="Stata2.html#cb46-5"></a><span class="st"> </span><span class="fl">353.</span> <span class="op">|</span><span class="st"> </span>MANN   NORDRHEIN<span class="op">-</span>WE    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb46-6"><a href="Stata2.html#cb46-6"></a><span class="fl">3299.</span> <span class="op">|</span><span class="st"> </span>MANN   RHEINLAND<span class="op">-</span>PF    <span class="dv">95</span> <span class="op">|</span></span>
<span id="cb46-7"><a href="Stata2.html#cb46-7"></a><span class="st">      </span><span class="op">+---------------------------+</span></span></code></pre></div>
<ul>
<li>oder wir hängen den <code>missing()</code>-Operator an die Bedingung an. Wenn wir diesen mit Hilfe eines <code>!</code> verneinen, bekommen wir nicht-fehlende Fälle ausgegeben:</li>
</ul>
<div class="sourceCode" id="cb47"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb47-1"><a href="Stata2.html#cb47-1"></a><span class="ot">list</span> sex land age <span class="kw">if</span> age &gt; 92 &amp; !<span class="fu">missing</span>(age)</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="Stata2.html#cb48-1"></a>      <span class="op">+---------------------------+</span></span>
<span id="cb48-2"><a href="Stata2.html#cb48-2"></a><span class="st">      </span><span class="er">|</span><span class="st">  </span>sex           land   age <span class="op">|</span></span>
<span id="cb48-3"><a href="Stata2.html#cb48-3"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb48-4"><a href="Stata2.html#cb48-4"></a><span class="st"> </span><span class="fl">126.</span> <span class="op">|</span><span class="st"> </span>MANN        SACHSEN    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb48-5"><a href="Stata2.html#cb48-5"></a><span class="st"> </span><span class="fl">353.</span> <span class="op">|</span><span class="st"> </span>MANN   NORDRHEIN<span class="op">-</span>WE    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb48-6"><a href="Stata2.html#cb48-6"></a><span class="fl">3299.</span> <span class="op">|</span><span class="st"> </span>MANN   RHEINLAND<span class="op">-</span>PF    <span class="dv">95</span> <span class="op">|</span></span>
<span id="cb48-7"><a href="Stata2.html#cb48-7"></a><span class="st">      </span><span class="op">+---------------------------+</span></span></code></pre></div>
</div>
<div id="keep-drop" class="section level2">
<h2><span class="header-section-number">2.8</span> keep &amp; drop</h2>
<p>Manchmal möchten wir nur bestimmte Beobachtungen im Datensatz behalten. Beispielsweise möchten wir für eine Analyse nur Befragte mit einem Einkommen über 1500 EUR im Datensatz behalten. Dazu können wir <code>keep</code> oder <code>drop</code> die gewünschten Fälle behalten bzw. die ungewünschten ausschließen:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb49-1"><a href="Stata2.html#cb49-1"></a><span class="kw">use</span> Allbus2018.dta</span>
<span id="cb49-2"><a href="Stata2.html#cb49-2"></a><span class="kw">keep</span> <span class="kw">if</span> inc &gt;= 1500</span>
<span id="cb49-3"><a href="Stata2.html#cb49-3"></a><span class="kw">d</span>,<span class="fu">s</span></span></code></pre></div>
<pre><code>(1813 observations deleted)


Contains data from D:\oCloud\Home-Cloud\Lehre\Methodenseminar\Allbus2018.dta
  obs:         1,664                          ALLBUS 2018
 vars:           708                          28 Mar 2019 16:09
 size:     1,642,368                          
Sorted by:  
     Note:  dataset has changed since last saved</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb51-1"><a href="Stata2.html#cb51-1"></a><span class="kw">use</span> Allbus2018.dta</span>
<span id="cb51-2"><a href="Stata2.html#cb51-2"></a><span class="kw">drop</span> <span class="kw">if</span> inc &lt; 1500</span>
<span id="cb51-3"><a href="Stata2.html#cb51-3"></a><span class="kw">d</span>,<span class="fu">s</span></span></code></pre></div>
<pre><code>(1813 observations deleted)


Contains data from D:\oCloud\Home-Cloud\Lehre\Methodenseminar\Allbus2018.dta
  obs:         1,664                          ALLBUS 2018
 vars:           708                          28 Mar 2019 16:09
 size:     1,642,368                          
Sorted by:  
     Note:  dataset has changed since last saved</code></pre>
<p>Hinweis: wenn die negativen Werte für <code>inc</code> bereits als Missing überschrieben sind, verbleiben diese Fälle im Datensatz! (Sie werden als unendlich groß erkannt!)</p>
</div>
<div id="labels-und-if-bedingungen" class="section level2">
<h2><span class="header-section-number">2.9</span> Labels und if-Bedingungen</h2>
<p>Genauso könnten wir auch vorgehen wenn wir nur männliche oder weibliche Befragte im Datensatz behalten möchten. Hier nochmal die Auszählung der Variable <code>sex</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb53-1"><a href="Stata2.html#cb53-1"></a><span class="kw">tabulate</span> sex</span></code></pre></div>
<pre><code>GESCHLECHT, |
BEFRAGTE(R) |      Freq.     Percent        Cum.
------------+-----------------------------------
       MANN |      1,773       50.99       50.99
       FRAU |      1,704       49.01      100.00
------------+-----------------------------------
      Total |      3,477      100.00</code></pre>
<p>Allerdings sind <code>MANN</code> und <code>FRAU</code> lediglich <em>Variablenlabels</em>. D.h. hier wurden Zahlencodes wieder mit Beschreibungen assoziiert. Wir können diese Labels nicht für <code>if</code>-Bedingungen verwenden:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb55-1"><a href="Stata2.html#cb55-1"></a><span class="kw">keep</span> <span class="kw">if</span> sex == <span class="st">&quot;FRAU&quot;</span></span></code></pre></div>
<p><code>type mismatch r(109);</code></p>
<p>Im Hintergrund ist <code>sex</code> nämlich eine numerische Variable</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb56-1"><a href="Stata2.html#cb56-1"></a><span class="kw">describe</span> sex</span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
------------------------------------------------------------------------------------------
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
<p>Unter <code>value label</code> sehen wir, dass hier das Label <code>sex</code> angefügt wurde.</p>
<p>Wir können die eigentlichen Werte in <code>tabulate</code> mit der Option <code>,nol</code> ausblenden:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb58-1"><a href="Stata2.html#cb58-1"></a><span class="kw">tabulate</span> sex, nol</span></code></pre></div>
<pre><code>GESCHLECHT, |
BEFRAGTE(R) |      Freq.     Percent        Cum.
------------+-----------------------------------
       MANN |      1,773       50.99       50.99
       FRAU |      1,704       49.01      100.00
------------+-----------------------------------
      Total |      3,477      100.00</code></pre>
<p>Wenn wir also nach Frauen filtern möchten, müssen wir den entsprechenden Zahlencode angeben:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb60-1"><a href="Stata2.html#cb60-1"></a><span class="kw">keep</span> <span class="kw">if</span> sex == 2</span></code></pre></div>
<p>Mehr zu labels <a href="adva.html#adva">hier</a></p>
</div>
<div id="nochmal-von-vorne-daten-neu-laden" class="section level2">
<h2><span class="header-section-number">2.10</span> Nochmal von vorne: Daten neu laden</h2>
<p>Variable gelöscht, die doch nötig ist? Falsch recodiert? Das ist zwar ärgerlich, aber ein riesen Vorteil der DoFile-basierten Datenarbeit mit Stata ist die Reproduzierbarkeit. Wir können einfach nochmal von vorne anfangen. Dazu lesen wir die Original-Daten einfach erneut mit <code>use</code> ein. Allerdings ist dann eine Besonderheit zu beachten:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb61-1"><a href="Stata2.html#cb61-1"></a><span class="kw">use</span> <span class="st">&quot;Allbus2018.dta&quot;</span></span></code></pre></div>
<p><code>no; dataset in memory has changed since last saved</code></p>
<p>Wir müssen erst den existierenden Datensatz mit <code>clear</code> löschen</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb62-1"><a href="Stata2.html#cb62-1"></a><span class="kw">clear</span></span>
<span id="cb62-2"><a href="Stata2.html#cb62-2"></a><span class="kw">use</span> <span class="st">&quot;Allbus2018.dta&quot;</span></span></code></pre></div>
<p>oder die <code>clear</code> Option für <code>use</code> verwenden:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb63-1"><a href="Stata2.html#cb63-1"></a><span class="kw">use</span> <span class="st">&quot;Allbus2018.dta&quot;</span>, <span class="kw">clear</span></span></code></pre></div>
</div>
<div id="speichern" class="section level2">
<h2><span class="header-section-number">2.11</span> Speichern</h2>
<p>Natürlich können wir unsere Daten auch abspeichern, wenn alles wie gewünscht geklappt hat. Dafür gibt es den Befehl <code>save</code>, der analog zu <code>use</code> funktioniert. Wenn wir allerdings einfach wieder den Original-Datensatznamen angeben und in der Zwischenzeit Variablen erstellt oder gelöscht haben, dann bekommen wir folgende Fehlermeldung:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb64-1"><a href="Stata2.html#cb64-1"></a>cd ... </span>
<span id="cb64-2"><a href="Stata2.html#cb64-2"></a><span class="kw">save</span> <span class="st">&quot;Allbus2018.dta&quot;</span></span></code></pre></div>
<p><code>file Allbus2018.dta already exists</code><br />
<code>r(602);</code></p>
<p>Wir geben also entweder einen anderen Dateinamen an:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb65-1"><a href="Stata2.html#cb65-1"></a><span class="kw">save</span> <span class="st">&quot;Allbus2018_neu.dta&quot;</span></span></code></pre></div>
<p>Wir können aber auch mit der Option <code>replace</code> explizit mitteilen, dass die Datei überschrieben werden soll:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb66-1"><a href="Stata2.html#cb66-1"></a><span class="kw">save</span> <span class="st">&quot;Allbus2018.dta&quot;</span>, <span class="kw">replace</span></span></code></pre></div>
<p>Damit sind die Originaldaten aber natürlich weg.</p>
</div>
<div id="übungen" class="section level2">
<h2><span class="header-section-number">2.12</span> Übungen</h2>
<ul>
<li><p>Laden Sie den Datensatz <code>Allbus2018</code> in Stata.</p></li>
<li><p>In welcher Variable ist das Geburtsjahr der Befragten abgelegt?</p></li>
<li><p>Erstellen Sie eine neue Variable mit dem Alter der Befragten im Jahr 2020!</p></li>
<li><p>Lassen Sie sich das Geburtsjahr und die neu erstellte Variable für die ersten 20 Beobachtungen anzeigen - hat alles geklappt wie es soll?</p></li>
<li><p>Wählen Sie alle Befragten aus, die nach 1960 geboren wurden und löschen Sie alle anderen aus dem Datensatz.</p></li>
<li><p>Wie viele Spalten hat <code>nach_1960</code>? Wie viele Zeilen?</p></li>
</ul>
</div>
<div id="profi-übungen" class="section level2">
<h2><span class="header-section-number">2.13</span> Profi-Übungen</h2>
<p>Für alle, die noch etwas mehr machen möchten:</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Stata1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="desc1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Arbeiten mit Datensätzen in Stata | GESIS Methodenseminar 2020</title>
  <meta name="description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Arbeiten mit Datensätzen in Stata | GESIS Methodenseminar 2020" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Arbeiten mit Datensätzen in Stata | GESIS Methodenseminar 2020" />
  
  <meta name="twitter:description" content="Dies ist das Begleitskript für die Stata-Übungen zum GESIS Methodenseminar 2020" />
  

<meta name="author" content="Andreas Filser" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Stata1.html"/>
<link rel="next" href="desc1.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Gesis Methodenseminar</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Herzlich Willkommen!</a></li>
<li class="chapter" data-level="1" data-path="Stata1.html"><a href="Stata1.html"><i class="fa fa-check"></i><b>1</b> Einstieg in Stata</a><ul>
<li class="chapter" data-level="1.1" data-path="Stata1.html"><a href="Stata1.html#taschenrechner"><i class="fa fa-check"></i><b>1.1</b> Taschenrechner</a></li>
<li class="chapter" data-level="1.2" data-path="Stata1.html"><a href="Stata1.html#darstellung-in-diesem-skript"><i class="fa fa-check"></i><b>1.2</b> Darstellung in diesem Skript</a></li>
<li class="chapter" data-level="1.3" data-path="Stata1.html"><a href="Stata1.html#dofile-editor"><i class="fa fa-check"></i><b>1.3</b> DoFile Editor</a></li>
<li class="chapter" data-level="1.4" data-path="Stata1.html"><a href="Stata1.html#datensätze-laden"><i class="fa fa-check"></i><b>1.4</b> Datensätze laden</a></li>
<li class="chapter" data-level="1.5" data-path="Stata1.html"><a href="Stata1.html#daten-codebücher-fragebogen"><i class="fa fa-check"></i><b>1.5</b> Daten, Codebücher, Fragebogen</a></li>
<li class="chapter" data-level="1.6" data-path="Stata1.html"><a href="Stata1.html#überblicksbefehle"><i class="fa fa-check"></i><b>1.6</b> Überblicksbefehle</a><ul>
<li class="chapter" data-level="1.6.1" data-path="Stata1.html"><a href="Stata1.html#describe"><i class="fa fa-check"></i><b>1.6.1</b> <code>describe</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="Stata1.html"><a href="Stata1.html#browse"><i class="fa fa-check"></i><b>1.6.2</b> <code>browse</code></a></li>
<li class="chapter" data-level="1.6.3" data-path="Stata1.html"><a href="Stata1.html#list"><i class="fa fa-check"></i><b>1.6.3</b> list</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="Stata1.html"><a href="Stata1.html#if-bedingung---nur-manche-zeilen-ansehen"><i class="fa fa-check"></i><b>1.7</b> if Bedingung - nur manche Zeilen ansehen</a></li>
<li class="chapter" data-level="1.8" data-path="Stata1.html"><a href="Stata1.html#U1"><i class="fa fa-check"></i><b>1.8</b> Übungen</a></li>
<li class="chapter" data-level="1.9" data-path="Stata1.html"><a href="Stata1.html#weitere-anmerkungen"><i class="fa fa-check"></i><b>1.9</b> Weitere Anmerkungen</a><ul>
<li class="chapter" data-level="1.9.1" data-path="Stata1.html"><a href="Stata1.html#var_types"><i class="fa fa-check"></i><b>1.9.1</b> Variablentypen</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Stata2.html"><a href="Stata2.html"><i class="fa fa-check"></i><b>2</b> Arbeiten mit Datensätzen in Stata</a><ul>
<li class="chapter" data-level="2.1" data-path="Stata2.html"><a href="Stata2.html#vorab-befehlsstruktur-hilfe"><i class="fa fa-check"></i><b>2.1</b> Vorab: Befehlsstruktur &amp; Hilfe</a></li>
<li class="chapter" data-level="2.2" data-path="Stata2.html"><a href="Stata2.html#auszählen-überblick-erhalten"><i class="fa fa-check"></i><b>2.2</b> Auszählen &amp; Überblick erhalten</a></li>
<li class="chapter" data-level="2.3" data-path="Stata2.html"><a href="Stata2.html#neue-variablen-erstellen"><i class="fa fa-check"></i><b>2.3</b> Neue Variablen erstellen</a></li>
<li class="chapter" data-level="2.4" data-path="Stata2.html"><a href="Stata2.html#gen-ist-gut-kontrolle-ist-besser"><i class="fa fa-check"></i><b>2.4</b> gen ist gut, Kontrolle ist besser</a></li>
<li class="chapter" data-level="2.5" data-path="Stata2.html"><a href="Stata2.html#bestehende-variablen-verändern"><i class="fa fa-check"></i><b>2.5</b> Bestehende Variablen verändern</a></li>
<li class="chapter" data-level="2.6" data-path="Stata2.html"><a href="Stata2.html#if-bedingungen-und-fehlende-werte"><i class="fa fa-check"></i><b>2.6</b> if Bedingungen und fehlende Werte</a></li>
<li class="chapter" data-level="2.7" data-path="Stata2.html"><a href="Stata2.html#keep-drop"><i class="fa fa-check"></i><b>2.7</b> keep &amp; drop</a></li>
<li class="chapter" data-level="2.8" data-path="Stata2.html"><a href="Stata2.html#nochmal-von-vorne-daten-neu-laden"><i class="fa fa-check"></i><b>2.8</b> Nochmal von vorne: Daten neu laden</a></li>
<li class="chapter" data-level="2.9" data-path="Stata2.html"><a href="Stata2.html#speichern"><i class="fa fa-check"></i><b>2.9</b> Speichern</a></li>
<li class="chapter" data-level="2.10" data-path="Stata2.html"><a href="Stata2.html#übungen"><i class="fa fa-check"></i><b>2.10</b> Übungen</a></li>
<li class="chapter" data-level="2.11" data-path="Stata2.html"><a href="Stata2.html#fortgeschrittene-themen"><i class="fa fa-check"></i><b>2.11</b> Fortgeschrittene Themen</a><ul>
<li class="chapter" data-level="2.11.1" data-path="Stata2.html"><a href="Stata2.html#sortieren"><i class="fa fa-check"></i><b>2.11.1</b> sortieren</a></li>
<li class="chapter" data-level="2.11.2" data-path="Stata2.html"><a href="Stata2.html#indikatoren-umdrehen"><i class="fa fa-check"></i><b>2.11.2</b> Indikatoren umdrehen</a></li>
<li class="chapter" data-level="2.11.3" data-path="Stata2.html"><a href="Stata2.html#informationen-aus-mehreren-variablen"><i class="fa fa-check"></i><b>2.11.3</b> Informationen aus mehreren Variablen</a></li>
<li class="chapter" data-level="2.11.4" data-path="Stata2.html"><a href="Stata2.html#informationen-aus-mehreren-datensätzen"><i class="fa fa-check"></i><b>2.11.4</b> Informationen aus mehreren Datensätzen</a></li>
<li class="chapter" data-level="2.11.5" data-path="Stata2.html"><a href="Stata2.html#egen"><i class="fa fa-check"></i><b>2.11.5</b> egen</a></li>
<li class="chapter" data-level="2.11.6" data-path="Stata2.html"><a href="Stata2.html#gruppierte-berechnungen"><i class="fa fa-check"></i><b>2.11.6</b> gruppierte Berechnungen</a></li>
<li class="chapter" data-level="2.11.7" data-path="Stata2.html"><a href="Stata2.html#collapse"><i class="fa fa-check"></i><b>2.11.7</b> collapse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="desc1.html"><a href="desc1.html"><i class="fa fa-check"></i><b>3</b> Deskriptive Statistik</a></li>
<li class="chapter" data-level="4" data-path="desc2.html"><a href="desc2.html"><i class="fa fa-check"></i><b>4</b> Mehr deskriptive Statistik</a></li>
<li class="chapter" data-level="5" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>5</b> Datenvisualisierung in Stata</a><ul>
<li class="chapter" data-level="5.1" data-path="dataviz.html"><a href="dataviz.html#grafik-syntax-in-stata"><i class="fa fa-check"></i><b>5.1</b> Grafik-Syntax in Stata</a><ul>
<li class="chapter" data-level="5.1.1" data-path="dataviz.html"><a href="dataviz.html#aufbau"><i class="fa fa-check"></i><b>5.1.1</b> Aufbau</a></li>
<li class="chapter" data-level="5.1.2" data-path="dataviz.html"><a href="dataviz.html#twoway"><i class="fa fa-check"></i><b>5.1.2</b> twoway</a></li>
<li class="chapter" data-level="5.1.3" data-path="dataviz.html"><a href="dataviz.html#kombinieren-von-zwei-twoway-grafiken"><i class="fa fa-check"></i><b>5.1.3</b> Kombinieren von zwei twoway-Grafiken</a></li>
<li class="chapter" data-level="5.1.4" data-path="dataviz.html"><a href="dataviz.html#vorlagen"><i class="fa fa-check"></i><b>5.1.4</b> Vorlagen</a></li>
<li class="chapter" data-level="5.1.5" data-path="dataviz.html"><a href="dataviz.html#optionen"><i class="fa fa-check"></i><b>5.1.5</b> Optionen</a></li>
<li class="chapter" data-level="5.1.6" data-path="dataviz.html"><a href="dataviz.html#farben"><i class="fa fa-check"></i><b>5.1.6</b> Farben</a></li>
<li class="chapter" data-level="5.1.7" data-path="dataviz.html"><a href="dataviz.html#subgruppen"><i class="fa fa-check"></i><b>5.1.7</b> Subgruppen</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="dataviz.html"><a href="dataviz.html#abschließende-beispiele"><i class="fa fa-check"></i><b>5.2</b> Abschließende Beispiele</a></li>
<li class="chapter" data-level="5.3" data-path="dataviz.html"><a href="dataviz.html#bevölkerungspyramide"><i class="fa fa-check"></i><b>5.3</b> Bevölkerungspyramide</a></li>
<li class="chapter" data-level="5.4" data-path="dataviz.html"><a href="dataviz.html#abschließende-bemerkungen"><i class="fa fa-check"></i><b>5.4</b> Abschließende Bemerkungen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lin-reg.html"><a href="lin-reg.html"><i class="fa fa-check"></i><b>6</b> Regression</a><ul>
<li class="chapter" data-level="6.1" data-path="lin-reg.html"><a href="lin-reg.html#beispieldatensatz"><i class="fa fa-check"></i><b>6.1</b> Beispieldatensatz</a></li>
<li class="chapter" data-level="6.2" data-path="lin-reg.html"><a href="lin-reg.html#idee-einer-regression"><i class="fa fa-check"></i><b>6.2</b> Idee einer Regression</a></li>
<li class="chapter" data-level="6.3" data-path="lin-reg.html"><a href="lin-reg.html#residuen"><i class="fa fa-check"></i><b>6.3</b> Residuen</a><ul>
<li class="chapter" data-level="6.3.1" data-path="lin-reg.html"><a href="lin-reg.html#quadrierte-residuen"><i class="fa fa-check"></i><b>6.3.1</b> Quadrierte Residuen</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="lin-reg.html"><a href="lin-reg.html#interpretation-der-regression"><i class="fa fa-check"></i><b>6.4</b> Interpretation der Regression</a><ul>
<li class="chapter" data-level="6.4.1" data-path="lin-reg.html"><a href="lin-reg.html#residuen-1"><i class="fa fa-check"></i><b>6.4.1</b> Residuen</a></li>
<li class="chapter" data-level="6.4.2" data-path="lin-reg.html"><a href="lin-reg.html#modellgüte"><i class="fa fa-check"></i><b>6.4.2</b> Modellgüte</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="Stata2.html"><a href="Stata2.html#übungen"><i class="fa fa-check"></i><b>6.5</b> Übungen</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="inf1.html"><a href="inf1.html"><i class="fa fa-check"></i><b>7</b> Inferenzstatistik I</a></li>
<li class="chapter" data-level="8" data-path="inf2.html"><a href="inf2.html"><i class="fa fa-check"></i><b>8</b> Inferenzstatistik II</a></li>
<li class="chapter" data-level="9" data-path="hypo.html"><a href="hypo.html"><i class="fa fa-check"></i><b>9</b> Hypothesentests</a></li>
<li class="chapter" data-level="10" data-path="export1.html"><a href="export1.html"><i class="fa fa-check"></i><b>10</b> Ergebnisexport &amp; weitere Tipps</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GESIS Methodenseminar 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Stata2" class="section level1">
<h1><span class="header-section-number">2</span> Arbeiten mit Datensätzen in Stata</h1>
<p>Nachdem wir uns in Stata etwas umgesehen haben, können wir uns jetzt</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb24-1"><a href="Stata2.html#cb24-1"></a>cd ....</span>
<span id="cb24-2"><a href="Stata2.html#cb24-2"></a><span class="kw">use</span> <span class="st">&quot;ZA5270_v2-0-0.dta&quot;</span></span></code></pre></div>
<div id="vorab-befehlsstruktur-hilfe" class="section level2">
<h2><span class="header-section-number">2.1</span> Vorab: Befehlsstruktur &amp; Hilfe</h2>
<p>Ganz nebenbei haben wir im Kapitel 1 bereits die ersten Stata-Befehle verwendet. Bevor wir jetzt aber tiefer einsteigen nochmal einmal ganz allgemein:</p>
<p>Die grundsätzliche Struktur von Stata-Kommandos ist immer <code>befehl variable, optionen</code>. Zunächst geben wir also immer an, was passieren soll - bisher war das eben zum Beispiel eine Beschreibung (<code>describe</code>) einer Variable:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb25-1"><a href="Stata2.html#cb25-1"></a><span class="kw">describe</span> sex</span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
----------------------------------------------------------------------------------------------------
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
<p>Diese können wir mit der Option <code>simple</code> abändern. Optionen werden nach einem <code>,</code> angegeben:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb27-1"><a href="Stata2.html#cb27-1"></a><span class="kw">describe</span> sex, simple</span></code></pre></div>
<pre><code>sex</code></pre>
<p>Befehle ohne Variable beziehen sich immer auf den gesamten Datensatz, bei <code>describe</code> bekommen wir damit dann eine Übersicht zum Datensatz:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb29-1"><a href="Stata2.html#cb29-1"></a><span class="kw">describe</span>, <span class="kw">short</span></span></code></pre></div>
<pre><code>Contains data from D:\oCloud\Home-Cloud\Lehre\Methodenseminar\ZA5270_v2-0-0.dta
  obs:         3,477                          ALLBUS 2018
 vars:           708                          28 Mar 2019 16:09
 size:     3,431,799                          
Sorted by:  </code></pre>
<p>Mit <code>help</code> bekommen wir eine Hilfeseite angezeigt, hilfreich sind dabei vor allem die Beispiele ganz unten:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb31-1"><a href="Stata2.html#cb31-1"></a><span class="kw">help</span> <span class="kw">describe</span></span></code></pre></div>
<p><img src="02_help_describe.PNG" width="40%" style="display: block; margin: auto;" /></p>
<p>Kommandos in Stata sind zeilenbasiert. D.h. alles was zu einem Kommando gehört, muss in der gleichen Zeile stehen. Umgekehrt wird auch alles, was in einer Zeile steht als Teil des Kommandos verstanden:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb32-1"><a href="Stata2.html#cb32-1"></a><span class="kw">describe</span> pv01 age sex, <span class="kw">short</span></span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
<p>Funktioniert nicht:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb34-1"><a href="Stata2.html#cb34-1"></a><span class="kw">d</span> pv01 age </span>
<span id="cb34-2"><a href="Stata2.html#cb34-2"></a>sex</span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)

unrecognized command:  sex
r(199);

end of do-file
r(199);</code></pre>
<p>Mit <code>///</code> können wir Zeilen verknüpfen:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb36-1"><a href="Stata2.html#cb36-1"></a><span class="kw">d</span> pv01 age <span class="co">///</span></span>
<span id="cb36-2"><a href="Stata2.html#cb36-2"></a>sex</span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
<p>Außerdem können wir mit <code>//</code> Kommentare in unsere DoFiles einfügen. <code>//</code> blendet alles folgende am Ende der Zeile aus:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb38-1"><a href="Stata2.html#cb38-1"></a><span class="kw">d</span> pv01 age sex <span class="co">// dies ist ein kommentar</span></span></code></pre></div>
<pre><code>              storage   display    value
variable name   type    format     label      variable label
--------------------------------------------------------------------------------
pv01            byte    %12.0g     pv01       BEFR.: WAHLABSICHT BUNDESTAGSWAHL
age             byte    %12.0g     age        ALTER: BEFRAGTE(R)
sex             byte    %12.0g     sex        GESCHLECHT, BEFRAGTE(R)</code></pre>
</div>
<div id="auszählen-überblick-erhalten" class="section level2">
<h2><span class="header-section-number">2.2</span> Auszählen &amp; Überblick erhalten</h2>
<p>Mit <code>summarize</code> und <code>tabulate</code> bekommen wir eine Übersicht zu den Kennzahlen bzw. eine Auszählung der Häufigkeiten einer Variable. Dies sind wohl die beiden wichtigsten Befehle in Stata:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb40-1"><a href="Stata2.html#cb40-1"></a><span class="kw">summarize</span> age</span></code></pre></div>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      3477     51.5568    17.91249        -32         95</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb42-1"><a href="Stata2.html#cb42-1"></a><span class="kw">summarize</span> age inc <span class="co">// klappt auch mit mehreren Variablen</span></span></code></pre></div>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      3477     51.5568    17.91249        -32         95
         inc |      3477    1620.798    1374.651        -50      18000</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb44-1"><a href="Stata2.html#cb44-1"></a><span class="kw">tabulate</span> sex</span></code></pre></div>
<pre><code>GESCHLECHT, |
BEFRAGTE(R) |      Freq.     Percent        Cum.
------------+-----------------------------------
       MANN |      1,773       50.99       50.99
       FRAU |      1,704       49.01      100.00
------------+-----------------------------------
      Total |      3,477      100.00</code></pre>
</div>
<div id="neue-variablen-erstellen" class="section level2">
<h2><span class="header-section-number">2.3</span> Neue Variablen erstellen</h2>
<div class="sourceCode" id="cb46"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb46-1"><a href="Stata2.html#cb46-1"></a><span class="kw">gen</span> age_mon = age * 12</span>
<span id="cb46-2"><a href="Stata2.html#cb46-2"></a>su age_mon</span></code></pre></div>
<pre><code>    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     age_mon |      3477    618.6816    214.9499       -384       1140</code></pre>
</div>
<div id="gen-ist-gut-kontrolle-ist-besser" class="section level2">
<h2><span class="header-section-number">2.4</span> gen ist gut, Kontrolle ist besser</h2>
<div class="sourceCode" id="cb48"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb48-1"><a href="Stata2.html#cb48-1"></a>bro respid age age_mon</span></code></pre></div>
<p><img src="02_stata_browse_kontrolle.png" width="40%" style="display: block; margin: auto;" /></p>
</div>
<div id="bestehende-variablen-verändern" class="section level2">
<h2><span class="header-section-number">2.5</span> Bestehende Variablen verändern</h2>
<div class="sourceCode" id="cb49"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb49-1"><a href="Stata2.html#cb49-1"></a><span class="kw">replace</span> age = . <span class="kw">if</span> age &lt; 0</span></code></pre></div>
</div>
<div id="if-bedingungen-und-fehlende-werte" class="section level2">
<h2><span class="header-section-number">2.6</span> if Bedingungen und fehlende Werte</h2>
<p>Fehlende Werte werden von Stata als “unendlich groß” gewertet!</p>
<p><code>&gt;</code>, <code>&lt;</code>, <code>==</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>!=</code> oder <code>~=</code> (ungleich)</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb50-1"><a href="Stata2.html#cb50-1"></a><span class="ot">list</span> sex land age <span class="kw">if</span> age &gt; 90</span></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="Stata2.html#cb51-1"></a>      <span class="op">+---------------------------+</span></span>
<span id="cb51-2"><a href="Stata2.html#cb51-2"></a><span class="st">      </span><span class="er">|</span><span class="st">  </span>sex           land   age <span class="op">|</span></span>
<span id="cb51-3"><a href="Stata2.html#cb51-3"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb51-4"><a href="Stata2.html#cb51-4"></a><span class="st"> </span><span class="fl">126.</span> <span class="op">|</span><span class="st"> </span>MANN        SACHSEN    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb51-5"><a href="Stata2.html#cb51-5"></a><span class="st"> </span><span class="fl">150.</span> <span class="op">|</span><span class="st"> </span>FRAU        SACHSEN    <span class="dv">92</span> <span class="op">|</span></span>
<span id="cb51-6"><a href="Stata2.html#cb51-6"></a><span class="st"> </span><span class="fl">322.</span> <span class="op">|</span><span class="st"> </span>FRAU   RHEINLAND<span class="op">-</span>PF     . <span class="op">|</span></span>
<span id="cb51-7"><a href="Stata2.html#cb51-7"></a><span class="st"> </span><span class="fl">353.</span> <span class="op">|</span><span class="st"> </span>MANN   NORDRHEIN<span class="op">-</span>WE    <span class="dv">94</span> <span class="op">|</span></span>
<span id="cb51-8"><a href="Stata2.html#cb51-8"></a><span class="st"> </span><span class="fl">556.</span> <span class="op">|</span><span class="st"> </span>FRAU   NORDRHEIN<span class="op">-</span>WE     . <span class="op">|</span></span>
<span id="cb51-9"><a href="Stata2.html#cb51-9"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb51-10"><a href="Stata2.html#cb51-10"></a><span class="fl">1061.</span> <span class="op">|</span><span class="st"> </span>FRAU   RHEINLAND<span class="op">-</span>PF    <span class="dv">92</span> <span class="op">|</span></span>
<span id="cb51-11"><a href="Stata2.html#cb51-11"></a><span class="fl">1342.</span> <span class="op">|</span><span class="st"> </span>FRAU   NORDRHEIN<span class="op">-</span>WE     . <span class="op">|</span></span>
<span id="cb51-12"><a href="Stata2.html#cb51-12"></a><span class="fl">1923.</span> <span class="op">|</span><span class="st"> </span>MANN   NIEDERSACHSE    <span class="dv">91</span> <span class="op">|</span></span>
<span id="cb51-13"><a href="Stata2.html#cb51-13"></a><span class="fl">2120.</span> <span class="op">|</span><span class="st"> </span>FRAU   BADEN<span class="op">-</span>WUERTT    <span class="dv">92</span> <span class="op">|</span></span>
<span id="cb51-14"><a href="Stata2.html#cb51-14"></a><span class="fl">2135.</span> <span class="op">|</span><span class="st"> </span>FRAU    BRANDENBURG     . <span class="op">|</span></span>
<span id="cb51-15"><a href="Stata2.html#cb51-15"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb51-16"><a href="Stata2.html#cb51-16"></a><span class="fl">2299.</span> <span class="op">|</span><span class="st"> </span>MANN        HAMBURG    <span class="dv">92</span> <span class="op">|</span></span>
<span id="cb51-17"><a href="Stata2.html#cb51-17"></a><span class="fl">2336.</span> <span class="op">|</span><span class="st"> </span>FRAU         HESSEN    <span class="dv">92</span> <span class="op">|</span></span>
<span id="cb51-18"><a href="Stata2.html#cb51-18"></a><span class="fl">2730.</span> <span class="op">|</span><span class="st"> </span>MANN   NIEDERSACHSE    <span class="dv">92</span> <span class="op">|</span></span>
<span id="cb51-19"><a href="Stata2.html#cb51-19"></a><span class="fl">2978.</span> <span class="op">|</span><span class="st"> </span>MANN   BADEN<span class="op">-</span>WUERTT    <span class="dv">92</span> <span class="op">|</span></span>
<span id="cb51-20"><a href="Stata2.html#cb51-20"></a><span class="fl">3130.</span> <span class="op">|</span><span class="st"> </span>MANN         HESSEN     . <span class="op">|</span></span>
<span id="cb51-21"><a href="Stata2.html#cb51-21"></a><span class="st">      </span><span class="er">|</span><span class="op">---------------------------</span><span class="er">|</span></span>
<span id="cb51-22"><a href="Stata2.html#cb51-22"></a><span class="fl">3299.</span> <span class="op">|</span><span class="st"> </span>MANN   RHEINLAND<span class="op">-</span>PF    <span class="dv">95</span> <span class="op">|</span></span>
<span id="cb51-23"><a href="Stata2.html#cb51-23"></a><span class="st">      </span><span class="op">+---------------------------+</span></span></code></pre></div>
<ul>
<li><code>inrange</code></li>
</ul>
</div>
<div id="keep-drop" class="section level2">
<h2><span class="header-section-number">2.7</span> keep &amp; drop</h2>
<p>Manchmal möchten wir</p>
</div>
<div id="nochmal-von-vorne-daten-neu-laden" class="section level2">
<h2><span class="header-section-number">2.8</span> Nochmal von vorne: Daten neu laden</h2>
<p>Variable gelöscht, die doch nötig ist? Falsch recodiert? Das ist zwar ärgerlich, aber ein riesen Vorteil der DoFile-basierten Datenarbeit mit Stata ist die Reproduzierbarkeit. Wir können einfach nochmal von vorne anfangen. Dazu lesen wir die Original-Daten einfach erneut mit <code>use</code> ein. Allerdings ist dann eine Besonderheit zu beachten:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb52-1"><a href="Stata2.html#cb52-1"></a><span class="kw">use</span> <span class="st">&quot;ZA5270_v2-0-0.dta&quot;</span></span></code></pre></div>
<p><code>no; dataset in memory has changed since last saved</code></p>
<p>Wir müssen erst den existierenden Datensatz mit <code>clear</code> löschen</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb53-1"><a href="Stata2.html#cb53-1"></a><span class="kw">clear</span></span>
<span id="cb53-2"><a href="Stata2.html#cb53-2"></a><span class="kw">use</span> <span class="st">&quot;ZA5270_v2-0-0.dta&quot;</span></span></code></pre></div>
<p>oder die <code>clear</code> Option für <code>use</code> verwenden:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb54-1"><a href="Stata2.html#cb54-1"></a><span class="kw">use</span> <span class="st">&quot;ZA5270_v2-0-0.dta&quot;</span>, <span class="kw">clear</span></span></code></pre></div>
</div>
<div id="speichern" class="section level2">
<h2><span class="header-section-number">2.9</span> Speichern</h2>
<p>Natürlich können wir unsere Daten auch abspeichern, wenn alles wie gewünscht geklappt hat. Dafür gibt es den Befehl <code>save</code>, der analog zu <code>use</code> funktioniert. Wenn wir allerdings einfach wieder den Original-Datensatznamen angeben und in der Zwischenzeit Variablen erstellt oder gelöscht haben, dann bekommen wir folgende Fehlermeldung:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb55-1"><a href="Stata2.html#cb55-1"></a>cd ... </span>
<span id="cb55-2"><a href="Stata2.html#cb55-2"></a><span class="kw">save</span> <span class="st">&quot;ZA5270_v2-0-0.dta&quot;</span></span></code></pre></div>
<p><code>file auto.dta already exists</code><br />
<code>r(602);</code></p>
<p>Wir geben also entweder einen anderen Dateinamen an:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb56-1"><a href="Stata2.html#cb56-1"></a><span class="kw">save</span> <span class="st">&quot;ZA5270_v2-0-0_neu.dta&quot;</span></span></code></pre></div>
<p>Oder wir teilen Stata mit der Option <code>replace</code> explizit mit, dass die Datei überschrieben werden soll:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb57-1"><a href="Stata2.html#cb57-1"></a><span class="kw">save</span> <span class="st">&quot;ZA5270_v2-0-0.dta&quot;</span>, <span class="kw">replace</span></span></code></pre></div>
</div>
<div id="übungen" class="section level2">
<h2><span class="header-section-number">2.10</span> Übungen</h2>
<ul>
<li><p>Laden Sie den Datensatz <code>Allbus2018</code> in Stata.</p></li>
<li><p>Erstellen Sie eine neue Variable mit dem Alter der Befragten im Jahr 2020!</p></li>
<li><p>Wählen Sie alle Befragten aus, die nach 1960 geboren wurden und löschen Sie alle anderen aus dem Datensatz.</p></li>
<li><p>Wie viele Spalten hat <code>nach_1960</code>? Wie viele Zeilen? Nutzen Sie für Ihre Antwort die Befehle die wir kennen gelernt haben.</p></li>
</ul>
</div>
<div id="fortgeschrittene-themen" class="section level2">
<h2><span class="header-section-number">2.11</span> Fortgeschrittene Themen</h2>
<div id="sortieren" class="section level3">
<h3><span class="header-section-number">2.11.1</span> sortieren</h3>
</div>
<div id="indikatoren-umdrehen" class="section level3">
<h3><span class="header-section-number">2.11.2</span> Indikatoren umdrehen</h3>
</div>
<div id="informationen-aus-mehreren-variablen" class="section level3">
<h3><span class="header-section-number">2.11.3</span> Informationen aus mehreren Variablen</h3>
</div>
<div id="informationen-aus-mehreren-datensätzen" class="section level3">
<h3><span class="header-section-number">2.11.4</span> Informationen aus mehreren Datensätzen</h3>
</div>
<div id="egen" class="section level3">
<h3><span class="header-section-number">2.11.5</span> egen</h3>
<p><code>egen</code> ist die Erweiterung von <code>gen</code> und gibt uns die Möglichkeit, eine ganze Reihe von</p>
</div>
<div id="gruppierte-berechnungen" class="section level3">
<h3><span class="header-section-number">2.11.6</span> gruppierte Berechnungen</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb58-1"><a href="Stata2.html#cb58-1"></a><span class="kw">bys</span> agec: <span class="kw">egen</span> mean_inc = <span class="kw">mean</span>(inc)</span>
<span id="cb58-2"><a href="Stata2.html#cb58-2"></a><span class="ot">list</span> agec mean_inc <span class="kw">in</span> 1</span></code></pre></div>
</div>
<div id="collapse" class="section level3">
<h3><span class="header-section-number">2.11.7</span> collapse</h3>
<p>Manchmal möchten wir vielleicht nur einen Mittelwert pro Gruppe und die einzelnen Werte interessieren uns gar nicht. Wir möchten unseren Datensatz also verkürzen, sodass er lediglich einen Wert pro Gruppe enthält. Dazu</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Stata1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="desc1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
